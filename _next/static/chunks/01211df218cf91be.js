(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69062,e=>{e.v({active:"Toolbar-module__cTID5a__active",button:"Toolbar-module__cTID5a__button",logo:"Toolbar-module__cTID5a__logo",toolbar:"Toolbar-module__cTID5a__toolbar",tooltip:"Toolbar-module__cTID5a__tooltip",tooltipHeading:"Toolbar-module__cTID5a__tooltipHeading",tooltipText:"Toolbar-module__cTID5a__tooltipText"})},9565,e=>{e.v({actions:"Modal-module__dhVKKa__actions",btn:"Modal-module__dhVKKa__btn",cancel:"Modal-module__dhVKKa__cancel",confirm:"Modal-module__dhVKKa__confirm",modal:"Modal-module__dhVKKa__modal",overlay:"Modal-module__dhVKKa__overlay"})},33436,e=>{e.v({canvasWrapper:"CanvasBoard-module__EDaARq__canvasWrapper",clearGuides:"CanvasBoard-module__EDaARq__clearGuides",container:"CanvasBoard-module__EDaARq__container",logo:"CanvasBoard-module__EDaARq__logo",rulerX:"CanvasBoard-module__EDaARq__rulerX",rulerY:"CanvasBoard-module__EDaARq__rulerY",zBtn:"CanvasBoard-module__EDaARq__zBtn",zoomControls:"CanvasBoard-module__EDaARq__zoomControls",zoomIndicator:"CanvasBoard-module__EDaARq__zoomIndicator"})},51036,e=>{e.v({active:"Properties-module__0nsVcG__active",buttonGroup:"Properties-module__0nsVcG__buttonGroup",checkboxRow:"Properties-module__0nsVcG__checkboxRow",colorInput:"Properties-module__0nsVcG__colorInput",colorPicker:"Properties-module__0nsVcG__colorPicker",controlGroup:"Properties-module__0nsVcG__controlGroup",divider:"Properties-module__0nsVcG__divider",exportBtn:"Properties-module__0nsVcG__exportBtn",iconBtn:"Properties-module__0nsVcG__iconBtn",iconButton:"Properties-module__0nsVcG__iconButton",input:"Properties-module__0nsVcG__input",label:"Properties-module__0nsVcG__label",layerActive:"Properties-module__0nsVcG__layerActive",layerBtn:"Properties-module__0nsVcG__layerBtn",layerControls:"Properties-module__0nsVcG__layerControls",layerItem:"Properties-module__0nsVcG__layerItem",layerList:"Properties-module__0nsVcG__layerList",panel:"Properties-module__0nsVcG__panel",row:"Properties-module__0nsVcG__row",section:"Properties-module__0nsVcG__section",sectionHeader:"Properties-module__0nsVcG__sectionHeader",sectionLabel:"Properties-module__0nsVcG__sectionLabel",select:"Properties-module__0nsVcG__select",slider:"Properties-module__0nsVcG__slider",textButton:"Properties-module__0nsVcG__textButton",textarea:"Properties-module__0nsVcG__textarea",tinyBtn:"Properties-module__0nsVcG__tinyBtn"})},20897,e=>{e.v({main:"page-module___8aEwW__main",responsiveWarning:"page-module___8aEwW__responsiveWarning",warningIcon:"page-module___8aEwW__warningIcon",warningText:"page-module___8aEwW__warningText",warningTitle:"page-module___8aEwW__warningTitle"})},74647,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let i=(0,a.createContext)(),l=()=>(0,a.useContext)(i),n=({children:e})=>{let[l,n]=(0,a.useState)({w:16,h:9}),[r]=(0,a.useState)(1200),[s,o]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!0),[c,x]=(0,a.useState)("#ffffff"),[u,p]=(0,a.useState)("#e0e0e0"),[y,f]=(0,a.useState)("#ff00ff"),[g]=(0,a.useState)("dark"),[m,v]=(0,a.useState)(!0),[b,k]=(0,a.useState)(!0),[j,w]=(0,a.useState)(!0),[M,S]=(0,a.useState)(.8),[_,C]=(0,a.useState)({x:50,y:50}),[z,N]=(0,a.useState)([]),[$,P]=(0,a.useState)(!1),[T,E]=(0,a.useState)("pencil"),[B,I]=(0,a.useState)("#000000"),[W,A]=(0,a.useState)("transparent"),[D,R]=(0,a.useState)(2),[G,L]=(0,a.useState)(0),[V,H]=(0,a.useState)(!1),[q,F]=(0,a.useState)("Sample Text"),[K,Y]=(0,a.useState)("Google Sans"),[X,O]=(0,a.useState)(24),[U,J]=(0,a.useState)("400"),[Z,Q]=(0,a.useState)("normal"),[ee,et]=(0,a.useState)("none"),[ea,ei]=(0,a.useState)("left"),[el,en]=(0,a.useState)(1.2),[er,es]=(0,a.useState)(0),[eo,ed]=(0,a.useState)("#000000"),[eh,ec]=(0,a.useState)(!0),[ex,eu]=(0,a.useState)(300),[ep,ey]=(0,a.useState)(1),[ef,eg]=(0,a.useState)("solid"),[em,ev]=(0,a.useState)("round"),[eb,ek]=(0,a.useState)("triangle"),[ej,ew]=(0,a.useState)({color:"#000000",blur:0,x:0,y:0}),[eM,eS]=(0,a.useState)("source-over"),[e_,eC]=(0,a.useState)(5),[ez,eN]=(0,a.useState)([{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),[e$,eP]=(0,a.useState)("layer-1"),[eT,eE]=(0,a.useState)([]),[eB,eI]=(0,a.useState)([]),[eW,eA]=(0,a.useState)([]),[eD,eR]=(0,a.useState)(-1);(0,a.useEffect)(()=>{let e=localStorage.getItem("canvas-project-v2");if(e)try{let t=JSON.parse(e);eE(t.elements||[]),eN(t.layers||[{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),n(t.aspectRatio||{w:16,h:9})}catch(e){console.error(e)}},[]),(0,a.useEffect)(()=>{document.body.setAttribute("data-theme",g)},[g]),(0,a.useEffect)(()=>{(eT.length>0||ez.length>1)&&localStorage.setItem("canvas-project-v2",JSON.stringify({elements:eT,layers:ez,aspectRatio:l}))},[eT,ez,l]),(0,a.useEffect)(()=>{if(0===eB.length)return;let e=eB.filter(e=>{let t=eT.find(t=>t.id===e);if(!t)return!1;let a=ez.find(e=>e.id===t.layerId);return a&&!a.locked&&a.visible});e.length!==eB.length&&eI(e)},[ez,eT,eB]);let eG=(0,a.useCallback)((e,t)=>{let a=void 0!==e?e:eT,i=void 0!==t?t:ez,l=eW.slice(0,eD+1);l.push({elements:[...a],layers:[...i]}),eA(l),eR(l.length-1)},[eW,eD,eT,ez]),eL=()=>{if(0===eB.length)return;let e=eT.filter(e=>!eB.includes(e.id));eE(e),eI([]),eG(e)},eV=()=>{if(0===eB.length)return;let e=eT.filter(e=>eB.includes(e.id));localStorage.setItem("canvas-clipboard",JSON.stringify(e))};return(0,t.jsx)(i.Provider,{value:{tool:T,setTool:E,strokeColor:B,setStrokeColor:I,fillColor:W,setFillColor:A,strokeWidth:D,setStrokeWidth:R,cornerRadius:G,setCornerRadius:L,opacity:ep,setOpacity:ey,strokeStyle:ef,setStrokeStyle:eg,lineCap:em,setLineCap:ev,arrowType:eb,setArrowType:ek,shadow:ej,setShadow:ew,blendMode:eM,setBlendMode:eS,spikes:e_,setSpikes:eC,isRatioLocked:V,setIsRatioLocked:H,gridVisible:s,setGridVisible:o,rulersVisible:d,setRulersVisible:h,backgroundColor:c,setBackgroundColor:x,gridColor:u,setGridColor:p,guideColor:y,setGuideColor:f,zoom:M,setZoom:S,panOffset:_,setPanOffset:C,theme:g,guides:z,setGuides:N,layers:ez,setLayers:eN,addLayer:()=>{let e=`layer-${Date.now()}`,t=[{id:e,name:`Layer ${ez.length+1}`,visible:!0,locked:!1},...ez];eN(t),eP(e),eG(eT,t)},deleteLayer:e=>{if(1===ez.length)return;let t=ez.filter(t=>t.id!==e),a=eT.filter(t=>t.layerId!==e);eN(t),eE(a),e$===e&&eP(t[0].id),eG(a,t)},moveLayer:(e,t)=>{let a=[...ez];"up"===t&&e>0?[a[e],a[e-1]]=[a[e-1],a[e]]:"down"===t&&e<a.length-1&&([a[e],a[e+1]]=[a[e+1],a[e]]),eN(a),eG(eT,a)},duplicateLayer:e=>{let t=ez.find(t=>t.id===e);if(!t)return;let a=`layer-${Date.now()}`,i={...t,id:a,name:`${t.name} Copy`},l=ez.findIndex(t=>t.id===e),n=[...ez];n.splice(l+1,0,i);let r=eT.filter(t=>t.layerId===e).map(e=>({...e,id:Date.now()+Math.random(),layerId:a,x:e.x+20,y:e.y+20})),s=[...eT,...r];eN(n),eE(s),eP(a),eG(s,n)},updateLayer:(e,t)=>{let a=ez.map(a=>a.id===e?{...a,...t}:a);eN(a),eG(eT,a)},activeLayerId:e$,setActiveLayerId:eP,elements:eT,setElements:eE,addElement:e=>{let t={id:Date.now(),layerId:e$,opacity:ep,strokeStyle:ef,lineCap:em,arrowType:eb,shadow:ej,blendMode:eM,rotation:0,isLocked:!1,...e},a=[...eT,t];return eE(a),eG(a),t},updateElement:(e,t,a=!0)=>{eE(i=>{let l=i.map(a=>a.id===e?{...a,...t}:a);return a&&eG(l),l})},batchUpdateElements:(e,t=!0)=>{eE(e),t&&eG(e)},deleteSelectedElements:eL,duplicateSelectedElements:()=>{if(0===eB.length)return;let e=eT.filter(e=>eB.includes(e.id)).map(e=>({...e,id:Date.now()+Math.random(),x:e.x+20,y:e.y+20})),t=[...eT,...e];eE(t),eI(e.map(e=>e.id)),eG(t)},copySelectedElements:eV,cutSelectedElements:()=>{0!==eB.length&&(eV(),eL())},pasteElements:()=>{let e=localStorage.getItem("canvas-clipboard");if(e)try{let t=JSON.parse(e);if(!Array.isArray(t))return;let a=t.map(e=>({...e,id:Date.now()+Math.random(),x:e.x+20,y:e.y+20,layerId:e$})),i=[...eT,...a];eE(i),eI(a.map(e=>e.id)),eG(i)}catch(e){console.error("Paste failed",e)}},selectedElementIds:eB,setSelectedElementIds:eI,aspectRatio:l,setAspectRatio:n,baseWidth:r,undo:()=>{if(eD>0){let e=eD-1,t=eW[e];eE(t.elements),eN(t.layers),eR(e)}else 0===eD&&(eE([]),eN([{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),eR(-1))},redo:()=>{if(eD<eW.length-1){let e=eD+1,t=eW[e];eE(t.elements),eN(t.layers),eR(e)}},resetEditor:()=>{eE([]),eN([{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),eP("layer-1"),eA([]),eR(-1),S(1),C({x:0,y:0}),localStorage.removeItem("canvas-project-v2")},snapToGrid:m,setSnapToGrid:v,snapToScale:b,setSnapToScale:k,snapToGuides:j,setSnapToGuides:w,guidesLocked:$,setGuidesLocked:P,textContent:q,setTextContent:F,fontFamily:K,setFontFamily:Y,fontSize:X,setFontSize:O,fontWeight:U,setFontWeight:J,fontStyle:Z,setFontStyle:Q,textDecoration:ee,setTextDecoration:et,textAlign:ea,setTextAlign:ei,lineHeight:el,setLineHeight:en,letterSpacing:er,setLetterSpacing:es,textColor:eo,setTextColor:ed,textVisible:eh,setTextVisible:ec,textMaxWidth:ex,setTextMaxWidth:eu},children:e})};var r=e.i(69062);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:r,iconNode:s,...h},c)=>(0,a.createElement)("svg",{ref:c,...d,width:t,height:t,stroke:e,strokeWidth:l?24*Number(i)/Number(t):i,className:o("lucide",n),...!r&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...s.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(r)?r:[r]])),c=(e,t)=>{let i=(0,a.forwardRef)(({className:i,...l},n)=>(0,a.createElement)(h,{ref:n,iconNode:t,className:o(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...l}));return i.displayName=s(e),i},x=c("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),u=c("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),p=c("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),y=c("triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),f=c("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]),g=c("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),m=c("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),v=c("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),b=c("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]),k=c("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),j=c("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),w=c("move-right",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]),M=c("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),S=c("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),_=c("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),C=c("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);var z=e.i(9565);function N({isOpen:e,onClose:a,onConfirm:i}){return e?(0,t.jsx)("div",{className:z.default.overlay,children:(0,t.jsxs)("div",{className:z.default.modal,children:[(0,t.jsx)("h2",{children:"Reset Canvas?"}),(0,t.jsx)("p",{style:{color:"#ccc"},children:"This will clear all layers and drawings. This action cannot be undone."}),(0,t.jsxs)("div",{className:z.default.actions,children:[(0,t.jsx)("button",{className:`${z.default.btn} ${z.default.cancel}`,onClick:a,children:"Cancel"}),(0,t.jsx)("button",{className:`${z.default.btn} ${z.default.confirm}`,onClick:i,children:"Yes, Clear All"})]})]})}):null}let $=[{id:"select",icon:(0,t.jsx)(f,{size:18}),label:"Select (V)"},{id:"pan",icon:(0,t.jsx)(_,{size:18}),label:"Pan (Space)"},{id:"pencil",icon:(0,t.jsx)(x,{size:18}),label:"Free Draw (P)"},{id:"text",icon:(0,t.jsx)(C,{size:18}),label:"Text (T)"},{id:"eraser",icon:(0,t.jsx)(S,{size:18}),label:"Eraser (Draw to Erase)"},{id:"remover",icon:(0,t.jsx)(k,{size:18}),label:"Remover (Delete Objects)"},{id:"line",icon:(0,t.jsx)(j,{size:18}),label:"Line"},{id:"arrow",icon:(0,t.jsx)(w,{size:18}),label:"Arrow"},{id:"rect",icon:(0,t.jsx)(u,{size:18}),label:"Rectangle (R)"},{id:"circle",icon:(0,t.jsx)(p,{size:18}),label:"Circle"},{id:"triangle",icon:(0,t.jsx)(y,{size:18}),label:"Triangle"},{id:"star",icon:(0,t.jsx)(M,{size:18}),label:"Star"}];function P(){let{tool:e,setTool:i,undo:n,redo:s,resetEditor:o,isRatioLocked:d,setIsRatioLocked:h,setSelectedElementIds:c}=l(),[x,u]=(0,a.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:r.default.toolbar,children:[(0,t.jsxs)("div",{className:r.default.logo,children:[(0,t.jsx)("img",{src:"/canvas/bin/logo.svg",alt:"Logo",style:{width:24,height:24}}),(0,t.jsxs)("div",{className:r.default.tooltip,children:[(0,t.jsx)("span",{className:r.default.tooltipHeading,children:"Free Online Canvas Editor"}),(0,t.jsx)("p",{className:r.default.tooltipText,children:"Draw shapes, sketch freely, add text, rulers, grids, and layers, then export designs in multiple formats and scales. This is a vibe coded, browser based project."})]})]}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8,width:"100%",overflowY:"auto"},children:$.map(a=>(0,t.jsx)("button",{className:`${r.default.button} ${e===a.id?r.default.active:""} `,onClick:()=>{var e;i(e=a.id),"select"!==e&&c([])},title:a.label,children:a.icon},a.id))}),(0,t.jsxs)("div",{style:{padding:"8px 0",width:"100%"},children:[(0,t.jsx)("div",{style:{height:1,background:"var(--neutral-4)",width:"100%",marginBottom:8}}),(0,t.jsx)("button",{className:`${r.default.button} ${d?r.default.active:""}`,onClick:()=>h(!d),title:"Lock Ratio",children:d?(0,t.jsx)(g,{size:18}):(0,t.jsx)(m,{size:18})})]}),(0,t.jsxs)("div",{style:{marginTop:"auto",display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[(0,t.jsx)("button",{className:r.default.button,onClick:n,title:"Undo (Ctrl+Z)",children:(0,t.jsx)(v,{size:18})}),(0,t.jsx)("button",{className:r.default.button,onClick:s,title:"Redo (Ctrl+Y)",children:(0,t.jsx)(b,{size:18})}),(0,t.jsx)("button",{className:r.default.button,onClick:()=>u(!0),title:"Reset Canvas",style:{color:"#ff5555"},children:(0,t.jsx)(k,{size:18})})]})]}),(0,t.jsx)(N,{isOpen:x,onClose:()=>u(!1),onConfirm:()=>{o(),u(!1)}})]})}var T=e.i(33436);let E=(e,t,a=1)=>{let{type:i,x:l,y:n,width:r,height:s,strokeColor:o,fillColor:d,strokeWidth:h,points:c,rotation:x,opacity:u,strokeStyle:p,lineCap:y,lineJoin:f,arrowType:g,gradient:m}=t;e.save(),e.globalAlpha=(void 0!==u?u:1)*a,e.globalCompositeOperation=t.blendMode||"source-over",e.strokeStyle=o,e.lineWidth=h,e.lineCap=y||"round",e.lineJoin=f||"round","dashed"===p?e.setLineDash([15,10]):"dotted"===p?e.setLineDash([2,5]):"loose"===p?e.setLineDash([25,15]):e.setLineDash([]);let v=l+r/2,b=n+s/2;if(x&&(e.translate(v,b),e.rotate(x*Math.PI/180),e.translate(-v,-b)),m&&"none"!==m.type){let t;if("linear"===m.type)t=e.createLinearGradient(l,n,l+r,n+s);else{let a=Math.max(Math.abs(r),Math.abs(s))/2;t=e.createRadialGradient(v,b,0,v,b,a)}m.stops.forEach(e=>t.addColorStop(e.offset,e.color)),e.fillStyle=t}else e.fillStyle="transparent"===d?"rgba(0,0,0,0)":d;switch(e.beginPath(),i){case"rect":case"square":if(t.cornerRadius&&t.cornerRadius>0){let a=Math.min(Math.abs(r),Math.abs(s))/2,i=Math.min(t.cornerRadius,a);e.roundRect(l,n,r,s,i)}else e.rect(l,n,r,s);break;case"circle":e.ellipse(v,b,Math.abs(r)/2,Math.abs(s)/2,0,0,2*Math.PI);break;case"triangle":e.moveTo(l+r/2,n),e.lineTo(l,n+s),e.lineTo(l+r,n+s),e.closePath();break;case"line":e.moveTo(l,n),e.lineTo(l+r,n+s);break;case"arrow":e.moveTo(l,n),e.lineTo(l+r,n+s),B(e,l,n,l+r,n+s,h,g||"triangle");break;case"star":I(e,v,b,r,s,t.spikes||5);break;case"pencil":if(c&&c.length>0){let a=e=>t.isNormalized?{x:l+e.x*r,y:n+e.y*s}:e,i=a(c[0]);e.moveTo(i.x,i.y);for(let t=1;t<c.length-2;t++){let i=a(c[t]),l=a(c[t+1]),n=(i.x+l.x)/2,r=(i.y+l.y)/2;e.quadraticCurveTo(i.x,i.y,n,r)}if(c.length>2){let t=a(c[c.length-2]),i=a(c[c.length-1]);e.quadraticCurveTo(t.x,t.y,i.x,i.y)}}break;case"text":if(t.textContent&&!1!==t.textVisible){e.save();let a=t.fontWeight||"400",i=t.fontSize||24,r=t.fontFamily||"Google Sans",s=t.fontStyle||"normal";e.font=`${s} ${a} ${i}px "${r}", sans-serif`,e.fillStyle=t.textColor||"#000000",e.textBaseline="top";let o=(t.lineHeight||1.2)*i,d=t.letterSpacing||0,h=t.textMaxWidth||t.width||300,c=t.textContent.split("\n"),x=[];c.forEach(t=>{if(""===t.trim())return void x.push("");let a=t.split(" "),i="";for(let t of a){let a=i+(i?" ":"")+t;e.measureText(a).width+(a.length-1)*d>h&&""!==i?(x.push(i),i=t):i=a}i&&x.push(i)}),x.forEach((a,r)=>{let s=l,c=n+r*o;if("center"===t.textAlign?(s=l+h/2,e.textAlign="center"):"right"===t.textAlign?(s=l+h,e.textAlign="right"):e.textAlign="left",0!==d){let i=s;"center"===t.textAlign?i=s-(e.measureText(a).width+(a.length-1)*d)/2:"right"===t.textAlign&&(i=s-(e.measureText(a).width+(a.length-1)*d));for(let t=0;t<a.length;t++)e.fillText(a[t],i,c),i+=e.measureText(a[t]).width+d}else e.fillText(a,s,c);if(t.textDecoration&&"none"!==t.textDecoration){let l=e.measureText(a),n=0!==d?l.width+(a.length-1)*d:l.width;e.strokeStyle=t.textColor||"#000000",e.lineWidth=Math.max(1,i/20);let r=s;if("center"===t.textAlign?r=s-n/2:"right"===t.textAlign&&(r=s-n),t.textDecoration.includes("underline")){let t=c+.9*i;e.beginPath(),e.moveTo(r,t),e.lineTo(r+n,t),e.stroke()}if(t.textDecoration.includes("line-through")){let t=c+.5*i;e.beginPath(),e.moveTo(r,t),e.lineTo(r+n,t),e.stroke()}}}),e.restore()}return}"transparent"===d||["pencil","line","arrow"].includes(i)||e.fill(),"transparent"!==o&&e.stroke(),t.eraserPaths&&t.eraserPaths.length>0&&(e.globalCompositeOperation="destination-out",e.globalAlpha=1,e.setLineDash([]),t.eraserPaths.forEach(t=>{if(!t.points||0===t.points.length)return;e.beginPath();let a=Math.sqrt(Math.abs((t.baseWidth?r/t.baseWidth:1)*(t.baseHeight?s/t.baseHeight:1)));e.lineWidth=(t.strokeWidth||20)*a,e.lineCap="round",e.lineJoin="round";let i=e=>({x:l+e.x*r,y:n+e.y*s}),o=i(t.points[0]);e.moveTo(o.x,o.y);for(let a=1;a<t.points.length-2;a++){let l=i(t.points[a]),n=i(t.points[a+1]),r=(l.x+n.x)/2,s=(l.y+n.y)/2;e.quadraticCurveTo(l.x,l.y,r,s)}if(t.points.length>2){let a=i(t.points[t.points.length-2]),l=i(t.points[t.points.length-1]);e.quadraticCurveTo(a.x,a.y,l.x,l.y)}else if(2===t.points.length){let a=i(t.points[1]);e.lineTo(a.x,a.y)}e.stroke()}),e.globalCompositeOperation="source-over"),e.restore()},B=(e,t,a,i,l,n,r)=>{let s=15+n,o=Math.atan2(l-a,i-t);e.stroke(),e.beginPath(),"circle"===r?(e.arc(i,l,5+n/2,0,2*Math.PI),e.fill()):"diamond"===r?(e.moveTo(i,l),e.lineTo(i-s*Math.cos(o-Math.PI/8),l-s*Math.sin(o-Math.PI/8)),e.lineTo(i-1.5*s*Math.cos(o),l-1.5*s*Math.sin(o)),e.lineTo(i-s*Math.cos(o+Math.PI/8),l-s*Math.sin(o+Math.PI/8)),e.closePath(),e.fill()):"simple"===r?(e.moveTo(i,l),e.lineTo(i-s*Math.cos(o-Math.PI/6),l-s*Math.sin(o-Math.PI/6)),e.moveTo(i,l),e.lineTo(i-s*Math.cos(o+Math.PI/6),l-s*Math.sin(o+Math.PI/6)),e.stroke()):(e.moveTo(i,l),e.lineTo(i-s*Math.cos(o-Math.PI/6),l-s*Math.sin(o-Math.PI/6)),e.lineTo(i-s*Math.cos(o+Math.PI/6),l-s*Math.sin(o+Math.PI/6)),e.closePath(),e.fill())},I=(e,t,a,i,l,n=5)=>{let r=Math.min(Math.abs(i),Math.abs(l))/2,s=r/2,o=Math.PI/2*3,d=Math.PI/n;e.moveTo(t,a-r);for(let i=0;i<n;i++)e.lineTo(t+Math.cos(o)*r,a+Math.sin(o)*r),o+=d,e.lineTo(t+Math.cos(o)*s,a+Math.sin(o)*s),o+=d;e.closePath()};function W({text:e="",fontSize:t=24,fontFamily:a="Google Sans",fontWeight:i="400",fontStyle:l="normal",lineHeight:n=1.2,letterSpacing:r=0,maxWidth:s=300}){if("undefined"==typeof document){let a=.5*t,i=e.split("\n"),l=0;return i.forEach(e=>{let t=e.length*a;l+=Math.max(1,Math.ceil(t/s))}),{lines:i,width:s,height:Math.max(l*t*n,t),lineCount:l}}let o=document.createElement("canvas").getContext("2d");o.font=`${l} ${i} ${t}px "${a}", sans-serif`;let d=e.split("\n"),h=[],c=0;d.forEach(e=>{if(""===e.trim())return void h.push("");let t=e.split(" "),a="";for(let e of t){let t=a+(a?" ":"")+e;if(o.measureText(t).width+(t.length-1)*r>s&&""!==a){let t=o.measureText(a).width+(a.length-1)*r;c=Math.max(c,t),h.push(a),a=e}else a=t}if(a){let e=o.measureText(a).width+(a.length-1)*r;c=Math.max(c,e),h.push(a)}}),0===h.length&&h.push("");let x=Math.max(h.length*t*n,t);return{lines:h,width:Math.min(c,s),height:x,lineCount:h.length}}function A(e,t={}){let a={...e,...t},i=W({text:a.textContent||"",fontSize:a.fontSize||24,fontFamily:a.fontFamily||"Google Sans",fontWeight:a.fontWeight||"400",fontStyle:a.fontStyle||"normal",lineHeight:a.lineHeight||1.2,letterSpacing:a.letterSpacing||0,maxWidth:a.textMaxWidth||a.width||300});return{...t,height:i.height,width:a.textMaxWidth||a.width||300}}let D=c("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),R=c("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),G=c("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);function L({element:e,onFinish:i,canvasRef:n,zoom:r,panOffset:s}){let[o,d]=(0,a.useState)(e.textContent||""),h=(0,a.useRef)(null),{updateElement:c}=l(),x=(0,a.useRef)(!1);(0,a.useEffect)(()=>{h.current&&(h.current.focus(),h.current.select())},[]);let u=(0,a.useCallback)(()=>{if(x.current)return;x.current=!0;let t=o.trim()||"Text";if(t!==e.textContent){let a=W({text:t,fontSize:e.fontSize||24,fontFamily:e.fontFamily||"Google Sans",fontWeight:e.fontWeight||"400",fontStyle:e.fontStyle||"normal",lineHeight:e.lineHeight||1.2,letterSpacing:e.letterSpacing||0,maxWidth:e.textMaxWidth||e.width||300});c(e.id,{textContent:t,height:a.height,width:e.textMaxWidth||e.width||300})}i()},[o,e,c,i]),p=e.x*r+s.x,y=e.y*r+s.y,f=e.textMaxWidth||e.width||300,g={position:"absolute",left:p,top:y,width:Math.max(f*r,150),minHeight:Math.max(W({text:o||"Text",fontSize:e.fontSize||24,fontFamily:e.fontFamily||"Google Sans",fontWeight:e.fontWeight||"400",fontStyle:e.fontStyle||"normal",lineHeight:e.lineHeight||1.2,letterSpacing:e.letterSpacing||0,maxWidth:f}).height*r,(e.fontSize||24)*r*2),fontSize:(e.fontSize||24)*r,fontFamily:`"${e.fontFamily||"Google Sans"}", sans-serif`,fontWeight:e.fontWeight||"400",fontStyle:e.fontStyle||"normal",color:e.textColor||"#000000",textAlign:e.textAlign||"left",lineHeight:e.lineHeight||1.2,letterSpacing:(e.letterSpacing||0)*r,background:"rgba(255, 255, 255, 0.95)",border:"2px solid #007acc",borderRadius:"4px",padding:"4px 6px",outline:"none",resize:"none",overflow:"hidden",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",boxSizing:"border-box"};return(0,t.jsx)("textarea",{ref:h,value:o,onChange:e=>d(e.target.value),onBlur:u,onKeyDown:e=>{"Escape"===e.key?(x.current=!0,i()):"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&u(),e.stopPropagation()},style:g,placeholder:"Enter text..."})}function V(){let e=(0,a.useRef)(null),i=(0,a.useRef)(null),{aspectRatio:n,baseWidth:r,tool:s,setTool:o,strokeColor:d,fillColor:h,strokeWidth:c,isRatioLocked:x,gridVisible:u,setGridVisible:p,backgroundColor:y,gridColor:f,guideColor:g,rulersVisible:m,elements:v,setElements:b,addElement:k,layers:j,activeLayerId:w,updateElement:M,batchUpdateElements:S,deleteSelectedElements:_,duplicateSelectedElements:C,copySelectedElements:z,cutSelectedElements:N,pasteElements:$,selectedElementIds:P,setSelectedElementIds:B,zoom:I,setZoom:V,panOffset:X,setPanOffset:Z,guides:Q,setGuides:ee,guidesLocked:et,undo:ea,redo:ei,spikes:el,strokeStyle:en,lineCap:er,arrowType:es,snapToGrid:eo,snapToScale:ed,snapToGuides:eh,cornerRadius:ec,textContent:ex,fontFamily:eu,fontSize:ep,fontWeight:ey,fontStyle:ef,textDecoration:eg,textAlign:em,lineHeight:ev,letterSpacing:eb,textColor:ek,textVisible:ej,textMaxWidth:ew}=l(),[eM,eS]=(0,a.useState)(!1),[e_,eC]=(0,a.useState)(null),[ez,eN]=(0,a.useState)(null),[e$,eP]=(0,a.useState)(null),[eT,eE]=(0,a.useState)(0),[eB,eI]=(0,a.useState)(null),eW=n?r/n.w*n.h:r/1.5,eA=t=>{let a=e.current.getBoundingClientRect();return{x:t.clientX-a.left,y:t.clientY-a.top}},eD=(0,a.useCallback)((e,t)=>({x:(e-X.x)/I,y:(t-X.y)/I}),[I,X]);(0,a.useEffect)(()=>{if(!e.current)return;let t=e.current.parentElement;if(Z({x:(t.clientWidth-r*I)/2+50,y:(t.clientHeight-eW*I)/2}),"undefined"!=typeof document&&document.fonts){let e=()=>{eE(e=>e+1)};return document.fonts.addEventListener("loadingdone",e),()=>document.fonts.removeEventListener("loadingdone",e)}},[]),(0,a.useEffect)(()=>{let t=e.current;if(!t)return;let a=t.getContext("2d");if(t.width=t.parentElement.clientWidth,t.height=t.parentElement.clientHeight,a.clearRect(0,0,t.width,t.height),a.save(),a.translate(X.x,X.y),a.scale(I,I),a.shadowColor="rgba(0,0,0,0.5)",a.shadowBlur=50,"transparent"===y)for(let e=0;e<eW;e+=10)for(let t=0;t<r;t+=10){a.fillStyle=(Math.floor(t/10)+Math.floor(e/10))%2==0?"#18191b":"#111113";let i=Math.min(10,r-t),l=Math.min(10,eW-e);a.fillRect(t,e,i,l)}else a.fillStyle=y,a.fillRect(0,0,r,eW);if(a.shadowBlur=0,a.beginPath(),a.rect(0,0,r,eW),a.clip(),u){a.beginPath(),a.strokeStyle=f,a.lineWidth=1/I;for(let e=0;e<=r;e+=40)a.moveTo(e,0),a.lineTo(e,eW);for(let e=0;e<=eW;e+=40)a.moveTo(0,e),a.lineTo(r,e);a.stroke()}i.current||(i.current=document.createElement("canvas"));let l=i.current;(l.width!==r||l.height!==eW)&&(l.width=r,l.height=eW);let n=l.getContext("2d");n.clearRect(0,0,r,eW),[...j].reverse().forEach(e=>{e.visible&&v.filter(t=>t.layerId===e.id).forEach(t=>{E(n,t,void 0!==e.opacity?e.opacity:1)})}),e_&&E(n,e_),a.drawImage(l,0,0);let s=v.filter(e=>P.includes(e.id));if(1===s.length)O(a,s[0],I);else if(s.length>1){let e=Y(s);e&&U(a,{...e,rotation:0},I)}m&&Q.forEach(e=>{a.beginPath(),a.strokeStyle=g,a.lineWidth=1/I,"v"===e.type?(a.moveTo(e.pos,-1e4),a.lineTo(e.pos,1e4)):(a.moveTo(-1e4,e.pos),a.lineTo(1e4,e.pos)),a.stroke()}),ez&&(a.setLineDash([5,5]),a.strokeStyle="#007acc",a.lineWidth=1/I,a.strokeRect(ez.x,ez.y,ez.w,ez.h)),a.restore()},[v,e_,j,r,eW,P,u,I,X,ez,Q,eB,y,f,g,m,eT]),(0,a.useEffect)(()=>{let e=e=>{if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&((e.ctrlKey||e.metaKey)&&("z"===e.key&&(e.preventDefault(),ea()),"y"===e.key&&(e.preventDefault(),ei()),"c"===e.key&&(e.preventDefault(),z()),"x"===e.key&&(e.preventDefault(),N()),"v"===e.key&&(e.preventDefault(),$())),("Delete"===e.key||"Backspace"===e.key)&&_(),(e.ctrlKey||e.metaKey)&&"d"===e.key&&(e.preventDefault(),C()),("v"===e.key||"V"===e.key)&&o("select"),("p"===e.key||"P"===e.key)&&o("pencil"),("e"===e.key||"E"===e.key)&&o("eraser"),("r"===e.key||"R"===e.key)&&o("rect"),("t"===e.key||"T"===e.key)&&(e.preventDefault(),o("text")),("g"===e.key||"G"===e.key)&&(e.preventDefault(),p(e=>!e)),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&P.length>0)){e.preventDefault();let t=e.shiftKey?10:1,a="ArrowLeft"===e.key?-t:"ArrowRight"===e.key?t:0,i="ArrowUp"===e.key?-t:"ArrowDown"===e.key?t:0,l=P.map(e=>v.find(t=>t.id===e)).filter(e=>{let t=j.find(t=>t.id===e?.layerId);return t&&!t.locked});l.length>0&&l.forEach(e=>{M(e.id,{x:e.x+a,y:e.y+i},!1)})}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[ea,ei,_,C,z,N,$,o,p,P,v,j,M]);let eR=()=>{if(eB){if(["move","rotate","resize","groupRotate","groupResize"].includes(eB.type)){if(eo&&u||eh){let e=e=>{if(eo&&u){let t=40*Math.round(e/40);if(eh&&Q.length>0){let a=null,i=1/0;if(Q.forEach(t=>{let l=Math.abs(t.pos-e);l<i&&l<10&&(i=l,a=t.pos)}),null!==a&&Math.abs(a-e)<Math.abs(t-e))return a}return t}if(eh&&Q.length>0){let t=null,a=1/0;if(Q.forEach(i=>{let l=Math.abs(i.pos-e);l<a&&l<10&&(a=l,t=i.pos)}),null!==t)return t}return e};"move"===eB.type?(eB.initialElements||[v.find(e=>e.id===eB.elId)]).forEach(t=>{let a=v.find(e=>e.id===t.id);a&&M(a.id,{x:e(a.x),y:e(a.y)},!1)}):("groupRotate"===eB.type||"groupResize"===eB.type)&&eB.initialElements.forEach(t=>{let a=v.find(e=>e.id===t.id);a&&M(a.id,{x:e(a.x),y:e(a.y)},!1)})}eB.elId?M(eB.elId,{},!0):eB.initialElements&&eB.initialElements.forEach(e=>M(e.id,{},!0))}else eB.type;eI(null),eN(null)}if(eM&&"eraser"===s&&e_&&e_.points.length>0){eS(!1);let e=e_.points.map(e=>e.x),t=e_.points.map(e=>e.y),a={x:Math.min(...e),y:Math.min(...t),w:Math.max(...e)-Math.min(...e),h:Math.max(...t)-Math.min(...t)};S(v.map(e=>{let t=j.find(t=>t.id===e.layerId);if(!t||t.locked||!t.visible)return e;let i=Y([e]);if(!i)return e;if(!(i.x>a.x+a.w||i.x+i.width<a.x||i.y>a.y+a.h||i.y+i.height<a.y)){let t=e.x+e.width/2,a=e.y+e.height/2,i=-(e.rotation||0)*Math.PI/180,l=Math.cos(i),n=Math.sin(i),r=e_.points.map(i=>({x:((i.x-t)*l-(i.y-a)*n+e.width/2)/e.width,y:((i.x-t)*n+(i.y-a)*l+e.height/2)/e.height}));return{...e,eraserPaths:[...e.eraserPaths||[],{points:r,strokeWidth:e_.strokeWidth||20,baseWidth:e.width,baseHeight:e.height}]}}return e}),!0),eC(null);return}if(eM&&"eraser"===s){eS(!1),eC(null);return}if(e_){let e={...e_};if(e.points&&e.points.length>1){let t=e.points.map(e=>e.x),a=e.points.map(e=>e.y),i=Math.min(...t),l=Math.min(...a),n=Math.max(Math.max(...t)-i,1),r=Math.max(Math.max(...a)-l,1);e.x=i,e.y=l,e.width=n,e.height=r,e.points=e.points.map(e=>({x:(e.x-i)/n,y:(e.y-l)/r})),e.isNormalized=!0}else 2>Math.abs(e.width)&&2>Math.abs(e.height)&&(e=null);if(e){let t=k(e);t&&B([t.id])}}eS(!1),eC(null)},eG=(e,t)=>{if(et)return;let a=eA(t),i=eD(a.x,a.y),l="v"===e?i.x:i.y;eo&&u&&(l=40*Math.round(l/40)),ee([...Q,{type:e,pos:l}]),eI({type:"dragGuide",index:Q.length,gType:e})};return(0,t.jsxs)("div",{className:T.default.container,onWheel:e=>{e.ctrlKey?(e.preventDefault(),V(t=>Math.min(Math.max(t*(e.deltaY>0?.9:1.1),.1),10))):Z(t=>({x:t.x-e.deltaX,y:t.y-e.deltaY}))},onContextMenu:e=>{P.length>0&&e.preventDefault()},children:[m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:T.default.rulerX,onMouseDown:e=>eG("h",e),children:(0,t.jsx)("div",{style:{transform:`translateX(${X.x}px) scaleX(${I})`,transformOrigin:"left"},children:Array.from({length:100}).map((e,a)=>(0,t.jsx)("span",{style:{left:100*a},children:100*a},a))})}),(0,t.jsx)("div",{className:T.default.rulerY,onMouseDown:e=>eG("v",e),children:(0,t.jsx)("div",{style:{transform:`translateY(${X.y}px) scaleY(${I})`,transformOrigin:"top"},children:Array.from({length:100}).map((e,a)=>(0,t.jsx)("span",{style:{top:100*a},children:100*a},a))})})]}),(0,t.jsx)("div",{className:T.default.canvasWrapper,children:(0,t.jsx)("canvas",{ref:e,onMouseDown:e=>{let t=eA(e),a=eD(t.x,t.y);if("pan"===s||1===e.button)return void eI({type:"pan",startPos:t,initialPan:X});if(m&&!et){let e=Q.findIndex(e=>Math.abs(e.pos-("v"===e.type?a.x:a.y))<6/I);if(-1!==e)return void eI({type:"dragGuide",index:e,gType:Q[e].type})}if(P.length>0){let e=v.filter(e=>P.includes(e.id));if(e.length>1){let t=Y(e);if(t){let i=J(t);if(Math.hypot(a.x-i.x,a.y-i.y)<10/I){let t=e.map(e=>({...e})),i=Y(t),l={x:i.x+i.width/2,y:i.y+i.height/2},n=Math.atan2(a.y-l.y,a.x-l.x);eI({type:"groupRotate",startPos:a,initialElements:t,groupRotation:0,bboxCenter:l,startAngle:n,initialBbox:i});return}let l={tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},bl:{x:t.x,y:t.y+t.height},br:{x:t.x+t.width,y:t.y+t.height}};for(let t in l){let i=l[t];if(Math.hypot(a.x-i.x,a.y-i.y)<8/I){let i=e.map(e=>({...e})),l=Y(i);eI({type:"groupResize",handle:t,startPos:a,initialElements:i,initialBbox:l});return}}}}else{let t=e[0],i=F(t);if(Math.hypot(a.x-i.x,a.y-i.y)<10/I)return void eI({type:"rotate",elId:t.id,startPos:a});let l=j.find(e=>e.id===t.layerId);if(l&&!l.locked){let e=K(t);for(let i in e){let l=e[i];if(Math.hypot(a.x-l.x,a.y-l.y)<8/I)return void eI({type:"resize",elId:t.id,handle:i,startPos:a,initial:{x:t.x,y:t.y,w:t.width,h:t.height,textMaxWidth:t.textMaxWidth}})}}}}if("select"===s){let t=[...v].reverse().find(e=>{let t=j.find(t=>t.id===e.layerId);return t&&!t.locked&&t.visible&&q(a.x,a.y,e)}),i=v.filter(e=>P.includes(e.id));i.length;let l=!1;if(P.length>0&&!t){let e=Y(i);if(e){let t=5/I;l=a.x>=e.x-t&&a.x<=e.x+e.width+t&&a.y>=e.y-t&&a.y<=e.y+e.height+t}}if(t||l){if(t){let i=!P.includes(t.id);if(i&&(e.shiftKey?B(e=>[...e,t.id]):B([t.id])),"text"===t.type&&2===e.detail)return void eP(t);let l=i?e.shiftKey?[...P,t.id]:[t.id]:P;eI({type:"move",startPos:a,initialElements:v.filter(e=>l.includes(e.id)).map(e=>({...e}))})}else l&&eI({type:"move",startPos:a,initialElements:i.map(e=>({...e}))});return}e.shiftKey||B([]),eI({type:"marquee",startPos:a});return}if("remover"===s){eS(!0);let e=[];v.forEach(t=>{let i=j.find(e=>e.id===t.layerId);i&&!i.locked&&i.visible&&H(t,a,15)&&e.push(t.id)}),e.length>0&&b(t=>t.filter(t=>!e.includes(t.id)));return}let i=j.find(e=>e.id===w);if(i&&(i.locked||!i.visible))return void alert("Cannot draw on a locked or hidden layer.");if(B([]),eS(!0),"text"===s){let e=function({x:e,y:t,text:a="Text",fontSize:i=24,fontFamily:l="Google Sans",fontWeight:n="400",fontStyle:r="normal",textDecoration:s="none",textAlign:o="left",lineHeight:d=1.2,letterSpacing:h=0,textColor:c="#000000",maxWidth:x=300}){let u=W({text:a,fontSize:i,fontFamily:l,fontWeight:n,fontStyle:r,lineHeight:d,letterSpacing:h,maxWidth:x});return{type:"text",x:e,y:t,width:x,height:u.height,textContent:a,fontFamily:l,fontSize:i,fontWeight:n,fontStyle:r,textDecoration:s,textAlign:o,lineHeight:d,letterSpacing:h,textColor:c,textVisible:!0,textMaxWidth:x,strokeColor:"transparent",fillColor:"transparent"}}({x:a.x,y:a.y,text:"Edit text in the property panel",fontSize:ep,fontFamily:eu,fontWeight:ey,fontStyle:ef,textDecoration:eg,textAlign:em,lineHeight:ev,letterSpacing:eb,textColor:ek,maxWidth:ew}),t=k(e);t&&(B([t.id]),o("select")),eS(!1),eC(null);return}eC({type:"eraser"===s?"pencil":s,x:a.x,y:a.y,width:0,height:0,strokeColor:"eraser"===s?"#000000":d,fillColor:"eraser"===s?"transparent":h,strokeWidth:c,blendMode:"eraser"===s?"destination-out":"source-over",spikes:el,strokeStyle:en,lineCap:er,arrowType:es,cornerRadius:ec,points:"pencil"===s||"eraser"===s?[{x:a.x,y:a.y}]:[]})},onMouseMove:t=>{let a=eA(t),i=eD(a.x,a.y);if(eB){if("pan"===eB.type)Z({x:eB.initialPan.x+(a.x-eB.startPos.x),y:eB.initialPan.y+(a.y-eB.startPos.y)});else if("move"===eB.type){let e=i.x-eB.startPos.x,t=i.y-eB.startPos.y,a=e=>{if(eo&&u)return 40*Math.round(e/40);if(eh&&Q.length>0){let t=null,a=1/0;if(Q.forEach(i=>{let l=Math.abs(i.pos-e);l<a&&l<10&&(a=l,t=i.pos)}),null!==t)return t}return e};eB.initialElements.forEach(i=>{M(i.id,{x:a(i.x+e),y:a(i.y+t)},!1)})}else if("resize"===eB.type){let e=i.x-eB.startPos.x,t=i.y-eB.startPos.y,{handle:a,initial:l}=eB,n=v.find(e=>e.id===eB.elId),r=l.w+("br"===a||"tr"===a?e:-e),s=l.h+("br"===a||"bl"===a?t:-t);if(x&&0!==l.w&&0!==l.h){l.w,l.h;let e=Math.max(Math.abs(r/l.w),Math.abs(s/l.h));r=l.w*e,s=l.h*e}ed&&(r=10*Math.round(r/10),s=10*Math.round(s/10));let o=l.x,d=l.y;"tl"===a?(o=l.x+l.w-r,d=l.y+l.h-s):"tr"===a?(o=l.x,d=l.y+l.h-s):"bl"===a?(o=l.x+l.w-r,d=l.y):"br"===a&&(o=l.x,d=l.y);let h=e=>{if(eo&&u)return 40*Math.round(e/40);if(eh&&Q.length>0){let t=null,a=1/0;if(Q.forEach(i=>{let l=Math.abs(i.pos-e);l<a&&l<10&&(a=l,t=i.pos)}),null!==t)return t}return e},c={x:h(o),y:h(d),width:r,height:s};if(n&&"text"===n.type&&l.textMaxWidth){let e=r/l.w,t=Math.max(50,Math.min(800,Math.round(l.textMaxWidth*e))),a=A(n,{textMaxWidth:t});c.textMaxWidth=a.textMaxWidth,c.height=a.height,c.width=t}M(eB.elId,c,!1)}else if("rotate"===eB.type){let e=v.find(e=>e.id===eB.elId),t=e.x+e.width/2,a=e.y+e.height/2,l=Math.atan2(i.y-a,i.x-t);M(e.id,{rotation:180*l/Math.PI+90},!1)}else if("groupRotate"===eB.type){let{bboxCenter:e,initialElements:t,startAngle:a}=eB,l=Math.atan2(i.y-e.y,i.x-e.x)-a,n=180*l/Math.PI;eB.groupRotation=n;let r=Math.cos(l),s=Math.sin(l);t.forEach(t=>{let a=t.x+t.width/2,i=t.y+t.height/2,l=a-e.x,o=i-e.y,d=e.x+(l*r-o*s)-t.width/2,h=e.y+(l*s+o*r)-t.height/2,c=(t.rotation||0)+n;M(t.id,{x:d,y:h,rotation:c},!1)})}else if("groupResize"===eB.type){let{handle:e,startPos:t,initialElements:a,initialBbox:l}=eB,n=i.x-t.x,r=i.y-t.y,s=1,o=1;if("br"===e?(s=(l.width+n)/l.width,o=(l.height+r)/l.height):"bl"===e?(s=(l.width-n)/l.width,o=(l.height+r)/l.height):"tr"===e?(s=(l.width+n)/l.width,o=(l.height-r)/l.height):"tl"===e&&(s=(l.width-n)/l.width,o=(l.height-r)/l.height),x){let e=Math.max(s,o);s=e,o=e}s=Math.max(.01,s),o=Math.max(.01,o);let d=l.x,h=l.y;"tl"===e?(d=l.x+l.width-l.width*s,h=l.y+l.height-l.height*o):"tr"===e?(d=l.x,h=l.y+l.height-l.height*o):"bl"===e?(d=l.x+l.width-l.width*s,h=l.y):"br"===e&&(d=l.x,h=l.y),a.forEach(e=>{let t=e.x-l.x,a=e.y-l.y,i=d+t*s,n=h+a*o,r=e.width*s,c=e.height*o;ed&&(r=10*Math.round(r/10),c=10*Math.round(c/10));let x={x:i,y:n,width:r,height:c};if("text"===e.type&&e.textMaxWidth){let t=Math.max(50,Math.min(800,Math.round(e.textMaxWidth*s))),a=A(e,{textMaxWidth:t});x.textMaxWidth=a.textMaxWidth,x.height=a.height,x.width=t}M(e.id,x,!1)})}else if("marquee"===eB.type){let e=Math.min(eB.startPos.x,i.x),t=Math.min(eB.startPos.y,i.y),a=Math.abs(i.x-eB.startPos.x),l=Math.abs(i.y-eB.startPos.y);eN({x:e,y:t,w:a,h:l}),B(v.filter(i=>{let n=i.x+(i.width||0)/2,r=i.y+(i.height||0)/2;if(!(n>=e&&n<=e+a&&r>=t&&r<=t+l))return!1;let s=j.find(e=>e.id===i.layerId);return s&&!s.locked&&s.visible}).map(e=>e.id))}else if("dragGuide"===eB.type){let e=[...Q],t="v"===eB.gType?i.x:i.y;eo&&u&&(t=40*Math.round(t/40)),e[eB.index].pos=t,ee(e)}}let l="default",n=v.filter(e=>P.includes(e.id)),r=n.length>1;if(eB?.type==="rotate"||eB?.type==="groupRotate")l="grabbing";else if(P.length>0)if(r){let e=Y(n);if(e){let t=J(e);if(Math.hypot(i.x-t.x,i.y-t.y)<10/I)l="grab";else{let t={tl:{x:e.x,y:e.y},tr:{x:e.x+e.width,y:e.y},bl:{x:e.x,y:e.y+e.height},br:{x:e.x+e.width,y:e.y+e.height}};Math.hypot(i.x-t.tl.x,i.y-t.tl.y)<8/I?l="nwse-resize":Math.hypot(i.x-t.tr.x,i.y-t.tr.y)<8/I||Math.hypot(i.x-t.bl.x,i.y-t.bl.y)<8/I?l="nesw-resize":Math.hypot(i.x-t.br.x,i.y-t.br.y)<8/I&&(l="nwse-resize")}}}else{let e=n[0];if(e){let t=F(e);if(Math.hypot(i.x-t.x,i.y-t.y)<10/I)l="grab";else{let t=K(e);Math.hypot(i.x-t.tl.x,i.y-t.tl.y)<8/I?l="nwse-resize":Math.hypot(i.x-t.tr.x,i.y-t.tr.y)<8/I||Math.hypot(i.x-t.bl.x,i.y-t.bl.y)<8/I?l="nesw-resize":Math.hypot(i.x-t.br.x,i.y-t.br.y)<8/I&&(l="nwse-resize")}}}if("select"===s){if("default"===l){for(let e of P){let t=v.find(t=>t.id===e);if(t&&q(i.x,i.y,t)){l="move";break}}if("default"===l&&r){let e=Y(n);e&&i.x>=e.x&&i.x<=e.x+e.width&&i.y>=e.y&&i.y<=e.y+e.height&&(l="move")}}if("default"===l&&m){let e=Q.find(e=>Math.abs(e.pos-("v"===e.type?i.x:i.y))<6/I);e&&(l="v"===e.type?"col-resize":"row-resize")}}else if("default"===l)if(m){let e=Q.find(e=>Math.abs(e.pos-("v"===e.type?i.x:i.y))<6/I);l=e?"v"===e.type?"col-resize":"row-resize":"crosshair"}else l="crosshair";if(e.current&&(e.current.style.cursor=l),eM&&"remover"===s){let e=[];v.forEach(t=>{let a=j.find(e=>e.id===t.layerId);a&&!a.locked&&a.visible&&H(t,i,15)&&e.push(t.id)}),e.length>0&&b(t=>t.filter(t=>!e.includes(t.id)))}if(eM&&e_)if("pencil"===s||"eraser"===s)eC(e=>({...e,points:[...e.points,i]}));else{let e=i.x-e_.x,t=i.y-e_.y;if(x){let a=Math.max(Math.abs(e),Math.abs(t));e=e<0?-a:a,t=t<0?-a:a}eC(a=>({...a,width:e,height:t}))}},onMouseUp:eR,onMouseLeave:eR})}),(0,t.jsxs)("div",{className:T.default.zoomControls,children:[(0,t.jsx)("button",{onClick:()=>V(e=>Math.max(e-.1,.1)),className:T.default.zBtn,children:(0,t.jsx)(R,{size:16})}),(0,t.jsx)("button",{onClick:()=>{if(!e.current)return;let t=e.current.parentElement,a=t.clientWidth,i=t.clientHeight;V(.8),Z({x:(a-.8*r)/2,y:(i-.8*eW)/2})},className:T.default.zBtn,children:(0,t.jsx)(G,{size:16})}),(0,t.jsxs)("span",{style:{fontSize:"var(--font-label)",marginLeft:8},children:[Math.round(100*I),"%"]}),(0,t.jsx)("button",{onClick:()=>V(e=>Math.min(e+.1,10)),className:T.default.zBtn,children:(0,t.jsx)(D,{size:16})})]}),e$&&(0,t.jsx)(L,{element:e$,onFinish:()=>eP(null),canvasRef:e,zoom:I,panOffset:X})]})}let H=(e,t,a)=>{if("text"===e.type)return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height;if("pencil"===e.type)return!!e.points&&0!==e.points.length&&(e.isNormalized?e.points.some(i=>{let l=e.x+i.x*e.width,n=e.y+i.y*e.height;return Math.hypot(l-t.x,n-t.y)<a}):e.points.some(e=>Math.hypot(e.x-t.x,e.y-t.y)<a));let i=e.width<0?e.x+e.width:e.x,l=e.height<0?e.y+e.height:e.y,n=Math.abs(e.width),r=Math.abs(e.height),s=Math.max(i,Math.min(t.x,i+n)),o=Math.max(l,Math.min(t.y,l+r));return Math.hypot(t.x-s,t.y-o)<a},q=(e,t,a)=>{if("text"===a.type)return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height;if("pencil"===a.type)return!!a.points&&0!==a.points.length&&(a.isNormalized?a.points.some(i=>{let l=a.x+i.x*a.width,n=a.y+i.y*a.height;return 10>Math.abs(l-e)&&10>Math.abs(n-t)}):a.points.some(a=>10>Math.abs(a.x-e)&&10>Math.abs(a.y-t)));if(a.rotation){let i=a.x+a.width/2,l=a.y+a.height/2,n=-a.rotation*Math.PI/180,r=Math.cos(n),s=Math.sin(n),o=i+(e-i)*r-(t-l)*s,d=l+(e-i)*s+(t-l)*r,h=a.width<0?a.x+a.width:a.x,c=a.height<0?a.y+a.height:a.y;return o>=h&&o<=h+Math.abs(a.width)&&d>=c&&d<=c+Math.abs(a.height)}let i=a.width<0?a.x+a.width:a.x,l=a.height<0?a.y+a.height:a.y;return e>=i&&e<=i+Math.abs(a.width)&&t>=l&&t<=l+Math.abs(a.height)},F=e=>{let t=e.x+e.width/2,a=e.y+e.height/2,i=e.height/2+30,l=((e.rotation||0)-90)*(Math.PI/180);return{x:t+Math.cos(l)*i,y:a+Math.sin(l)*i}},K=e=>({tl:{x:e.x,y:e.y},tr:{x:e.x+e.width,y:e.y},bl:{x:e.x,y:e.y+e.height},br:{x:e.x+e.width,y:e.y+e.height}}),Y=e=>{if(0===e.length)return null;if(1===e.length){let t=e[0];if(t.rotation){let e=X(t),a=1/0,i=1/0,l=-1/0,n=-1/0;return e.forEach(e=>{a=Math.min(a,e.x),i=Math.min(i,e.y),l=Math.max(l,e.x),n=Math.max(n,e.y)}),{x:a,y:i,width:l-a,height:n-i,rotation:t.rotation||0}}return{x:t.x,y:t.y,width:t.width,height:t.height,rotation:t.rotation||0}}let t=1/0,a=1/0,i=-1/0,l=-1/0;return e.forEach(e=>{X(e).forEach(e=>{t=Math.min(t,e.x),a=Math.min(a,e.y),i=Math.max(i,e.x),l=Math.max(l,e.y)})}),{x:t,y:a,width:i-t,height:l-a,rotation:0}},X=e=>{let t=e.width<0?e.x+e.width:e.x,a=e.height<0?e.y+e.height:e.y,i=Math.abs(e.width),l=Math.abs(e.height),n=[{x:t,y:a},{x:t+i,y:a},{x:t,y:a+l},{x:t+i,y:a+l}];if(e.rotation){let r=t+i/2,s=a+l/2,o=e.rotation*Math.PI/180,d=Math.cos(o),h=Math.sin(o);return n.map(e=>{let t=e.x-r,a=e.y-s;return{x:r+t*d-a*h,y:s+t*h+a*d}})}return n},O=(e,t,a)=>{e.save();let i=t.x+t.width/2,l=t.y+t.height/2;t.rotation&&(e.translate(i,l),e.rotate(t.rotation*Math.PI/180),e.translate(-i,-l)),e.strokeStyle="#007acc",e.lineWidth=1/a,e.setLineDash([5,5]),e.strokeRect(t.x,t.y,t.width,t.height),e.setLineDash([]);let n=K(t);e.fillStyle="#ffffff";let r=8/a;for(let t in n){let a=n[t];e.fillRect(a.x-r/2,a.y-r/2,r,r),e.strokeRect(a.x-r/2,a.y-r/2,r,r)}let s=F(t);e.beginPath(),e.arc(s.x,s.y,6/a,0,2*Math.PI),e.fillStyle="#007acc",e.fill(),e.beginPath(),e.strokeStyle="#007acc",e.lineWidth=1/a,e.moveTo(i,l-Math.abs(t.height)/2),e.lineTo(s.x,s.y),e.stroke(),e.restore()},U=(e,t,a)=>{e.save();let i=t.x+t.width/2,l=t.y+t.height/2;t.rotation&&(e.translate(i,l),e.rotate(t.rotation*Math.PI/180),e.translate(-i,-l)),e.strokeStyle="#007acc",e.lineWidth=1/a,e.setLineDash([5,5]),e.strokeRect(t.x,t.y,t.width,t.height),e.setLineDash([]);let n={tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},bl:{x:t.x,y:t.y+t.height},br:{x:t.x+t.width,y:t.y+t.height}};e.fillStyle="#ffffff",e.strokeStyle="#007acc";let r=8/a;for(let t in n){let a=n[t];e.fillRect(a.x-r/2,a.y-r/2,r,r),e.strokeRect(a.x-r/2,a.y-r/2,r,r)}let s=J(t);e.beginPath(),e.arc(s.x,s.y,6/a,0,2*Math.PI),e.fillStyle="#007acc",e.fill(),e.beginPath(),e.strokeStyle="#007acc",e.lineWidth=1/a,e.moveTo(i,l-Math.abs(t.height)/2),e.lineTo(s.x,s.y),e.stroke(),e.restore()},J=e=>{let t=e.x+e.width/2,a=e.y+e.height/2,i=e.height/2+30,l=((e.rotation||0)-90)*(Math.PI/180);return{x:t+Math.cos(l)*i,y:a+Math.sin(l)*i}};var Z=e.i(51036);let Q=c("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ee=c("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),et=c("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),ea=c("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ei=c("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),el=c("align-start-vertical",[["rect",{width:"9",height:"6",x:"6",y:"14",rx:"2",key:"lpm2y7"}],["rect",{width:"16",height:"6",x:"6",y:"4",rx:"2",key:"rdj6ps"}],["path",{d:"M2 2v20",key:"1ivd8o"}]]),en=c("align-end-vertical",[["rect",{width:"16",height:"6",x:"2",y:"4",rx:"2",key:"10wcwx"}],["rect",{width:"9",height:"6",x:"9",y:"14",rx:"2",key:"4p5bwg"}],["path",{d:"M22 22V2",key:"12ipfv"}]]),er=c("align-start-horizontal",[["rect",{width:"6",height:"16",x:"4",y:"6",rx:"2",key:"1n4dg1"}],["rect",{width:"6",height:"9",x:"14",y:"6",rx:"2",key:"17khns"}],["path",{d:"M22 2H2",key:"fhrpnj"}]]),es=c("align-end-horizontal",[["rect",{width:"6",height:"16",x:"4",y:"2",rx:"2",key:"z5wdxg"}],["rect",{width:"6",height:"9",x:"14",y:"9",rx:"2",key:"um7a8w"}],["path",{d:"M22 22H2",key:"19qnx5"}]]),eo=c("align-horizontal-justify-center",[["rect",{width:"6",height:"14",x:"2",y:"5",rx:"2",key:"dy24zr"}],["rect",{width:"6",height:"10",x:"16",y:"7",rx:"2",key:"13zkjt"}],["path",{d:"M12 2v20",key:"t6zp3m"}]]),ed=c("align-vertical-justify-center",[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),eh=c("align-vertical-space-between",[["rect",{width:"14",height:"6",x:"5",y:"15",rx:"2",key:"1w91an"}],["rect",{width:"10",height:"6",x:"7",y:"3",rx:"2",key:"17wqzy"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M2 3h20",key:"91anmk"}]]),ec=c("align-vertical-space-around",[["rect",{width:"10",height:"6",x:"7",y:"9",rx:"2",key:"b1zbii"}],["path",{d:"M22 20H2",key:"1p1f7z"}],["path",{d:"M22 4H2",key:"1b7qnq"}]]),ex=c("align-horizontal-space-between",[["rect",{width:"6",height:"14",x:"3",y:"5",rx:"2",key:"j77dae"}],["rect",{width:"6",height:"10",x:"15",y:"7",rx:"2",key:"bq30hj"}],["path",{d:"M3 2v20",key:"1d2pfg"}],["path",{d:"M21 2v20",key:"p059bm"}]]),eu=c("align-horizontal-space-around",[["rect",{width:"6",height:"10",x:"9",y:"7",rx:"2",key:"yn7j0q"}],["path",{d:"M4 22V2",key:"tsjzd3"}],["path",{d:"M20 22V2",key:"1bnhr8"}]]),ep=c("align-vertical-distribute-center",[["path",{d:"M22 17h-3",key:"1lwga1"}],["path",{d:"M22 7h-5",key:"o2endc"}],["path",{d:"M5 17H2",key:"1gx9xc"}],["path",{d:"M7 7H2",key:"6bq26l"}],["rect",{x:"5",y:"14",width:"14",height:"6",rx:"2",key:"1qrzuf"}],["rect",{x:"7",y:"4",width:"10",height:"6",rx:"2",key:"we8e9z"}]]),ey=c("align-horizontal-distribute-center",[["rect",{width:"6",height:"14",x:"4",y:"5",rx:"2",key:"1wwnby"}],["rect",{width:"6",height:"10",x:"14",y:"7",rx:"2",key:"1fe6j6"}],["path",{d:"M17 22v-5",key:"4b6g73"}],["path",{d:"M17 7V2",key:"hnrr36"}],["path",{d:"M7 22v-3",key:"1r4jpn"}],["path",{d:"M7 5V2",key:"liy1u9"}]]),ef=c("paint-bucket",[["path",{d:"M11 7 6 2",key:"1jwth8"}],["path",{d:"M18.992 12H2.041",key:"xw1gg"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]]),eg=c("line-squiggle",[["path",{d:"M7 3.5c5-2 7 2.5 3 4C1.5 10 2 15 5 16c5 2 9-10 14-7s.5 13.5-4 12c-5-2.5.5-11 6-2",key:"1lrphd"}]]),em=c("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ev=c("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),eb=c("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),ek=c("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),ej=c("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),ew=c("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]),eM=c("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),eS=c("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]),e_=c("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);function eC(){let{selectedElementIds:e,elements:i,updateElement:n,textContent:r,setTextContent:s,fontFamily:o,setFontFamily:d,fontSize:h,setFontSize:c,fontWeight:x,setFontWeight:u,fontStyle:p,setFontStyle:y,textDecoration:f,setTextDecoration:g,textAlign:m,setTextAlign:v,lineHeight:b,setLineHeight:k,letterSpacing:j,setLetterSpacing:w,textColor:M,setTextColor:S,textVisible:_,setTextVisible:C,textMaxWidth:z,setTextMaxWidth:N}=l(),[$,P]=(0,a.useState)(!1),[T,E]=(0,a.useState)(""),B=1===e.length?i.find(t=>t.id===e[0]&&"text"===t.type):null;(0,a.useEffect)(()=>{B&&(s(B.textContent||"Text"),d(B.fontFamily||"Google Sans"),c(B.fontSize||24),u(B.fontWeight||"400"),y(B.fontStyle||"normal"),g(B.textDecoration||"none"),v(B.textAlign||"left"),k(B.lineHeight||1.2),w(B.letterSpacing||0),S(B.textColor||"#000000"),C(!1!==B.textVisible),N(B.textMaxWidth||300))},[B?.id]);let I=async(e,t)=>{let a={textContent:s,fontFamily:d,fontSize:c,fontWeight:u,fontStyle:y,textDecoration:g,textAlign:v,lineHeight:k,letterSpacing:w,textColor:S,textVisible:C,textMaxWidth:N};if(a[e]&&a[e](t),B){let a={[e]:t};if(["fontSize","lineHeight","textContent","textMaxWidth","fontFamily","fontWeight","fontStyle","letterSpacing"].includes(e)){if("fontFamily"===e||"fontWeight"===e||"fontStyle"===e){let a="fontWeight"===e?t:R("fontWeight","400"),i="fontStyle"===e?t:R("fontStyle","normal"),l="fontFamily"===e?t:R("fontFamily","Google Sans"),n=R("fontSize",24);if("undefined"!=typeof document&&document.fonts&&document.fonts.load)try{await document.fonts.load(`${i} ${a} ${n}px "${l}"`)}catch(e){console.warn("Font load failed",e)}}a=A(B,a)}n(B.id,a)}},W=()=>{B&&T!==B.textContent&&I("textContent",T.trim()||"Text"),P(!1)},D=e=>{let t=B?.textDecoration||f,a=t;t.includes(e)?(a=t.replace(e,"").replace(/\s+/g," ").trim())||(a="none"):a="none"===t?e:`${t} ${e}`,I("textDecoration",a)},R=(e,t)=>B&&void 0!==B[e]?B[e]:({fontWeight:x,fontStyle:p,textDecoration:f,textAlign:m,textVisible:_,fontFamily:o,fontSize:h,lineHeight:b,letterSpacing:j,textColor:M,textMaxWidth:z,textContent:r})[e]??t,G=R("fontWeight","400"),L=R("fontStyle","normal"),V=R("textDecoration","none"),H=R("textAlign","left"),q=!1!==R("textVisible",!0);return(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsxs)("div",{className:Z.default.sectionHeader,style:{justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("span",{children:"Text Properties"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:R("textColor","#000000"),onChange:e=>I("textColor",e.target.value),className:Z.default.colorInput,style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{onClick:()=>I("textVisible",!q),className:`${Z.default.iconBtn} ${q?Z.default.active:""}`,title:q?"Hide Text":"Show Text",children:q?(0,t.jsx)(ea,{size:16}):(0,t.jsx)(ei,{size:16})})]})]}),(0,t.jsx)("div",{className:Z.default.row,children:$?(0,t.jsx)("textarea",{value:T,onChange:e=>E(e.target.value),onBlur:W,onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&W(),"Escape"===e.key&&P(!1)},className:Z.default.textarea,placeholder:"Enter text...",autoFocus:!0,rows:3}):(0,t.jsxs)("button",{onClick:()=>{B&&(E(B.textContent||""),P(!0))},className:Z.default.textButton,title:"Click to edit text",children:[R("textContent","Text").substring(0,30),R("textContent","Text").length>30?"...":""]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("select",{value:R("fontFamily","Google Sans"),onChange:e=>I("fontFamily",e.target.value),className:Z.default.select,children:[(0,t.jsx)("option",{value:"Google Sans",children:"Sans (Google Sans)"}),(0,t.jsx)("option",{value:"Lora",children:"Serif (Lora)"}),(0,t.jsx)("option",{value:"JetBrains Mono",children:"Monospace (JetBrains Mono)"}),(0,t.jsx)("option",{value:"Caveat",children:"Handwriting (Caveat)"})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Size: ",R("fontSize",24),"px"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"12",max:"64",step:"1",value:R("fontSize",24),onChange:e=>I("fontSize",parseInt(e.target.value)||24)})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Weight:",(()=>{let e=R("fontWeight","400");switch(e){case"400":return" Regular";case"500":return" Medium";case"600":return" Semi Bold";case"700":return" Bold";default:return e}})()]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"400",max:"700",step:"100",value:R("fontWeight","400"),onChange:e=>I("fontWeight",e.target.value)})]})}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{className:Z.default.buttonGroup,children:[(0,t.jsx)("button",{onClick:()=>{I("fontWeight",["700","bold"].includes(B?.fontWeight||x)?"400":"700")},className:`${Z.default.iconButton} ${["700","bold"].includes(G)?Z.default.active:""}`,title:"Bold",children:(0,t.jsx)(eb,{size:14})}),(0,t.jsx)("button",{onClick:()=>{I("fontStyle","italic"===(B?.fontStyle||p)?"normal":"italic")},className:`${Z.default.iconButton} ${"italic"===L?Z.default.active:""}`,title:"Italic",children:(0,t.jsx)(ek,{size:14})}),(0,t.jsx)("button",{onClick:()=>D("underline"),className:`${Z.default.iconButton} ${V.includes("underline")?Z.default.active:""}`,title:"Underline",children:(0,t.jsx)(ej,{size:14})}),(0,t.jsx)("button",{onClick:()=>D("line-through"),className:`${Z.default.iconButton} ${V.includes("line-through")?Z.default.active:""}`,title:"Strikethrough",children:(0,t.jsx)(ew,{size:14})})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{className:Z.default.buttonGroup,children:[(0,t.jsx)("button",{onClick:()=>I("textAlign","left"),className:`${Z.default.iconButton} ${"left"===H?Z.default.active:""}`,title:"Align Left",children:(0,t.jsx)(eM,{size:14})}),(0,t.jsx)("button",{onClick:()=>I("textAlign","center"),className:`${Z.default.iconButton} ${"center"===H?Z.default.active:""}`,title:"Align Center",children:(0,t.jsx)(eS,{size:14})}),(0,t.jsx)("button",{onClick:()=>I("textAlign","right"),className:`${Z.default.iconButton} ${"right"===H?Z.default.active:""}`,title:"Align Right",children:(0,t.jsx)(e_,{size:14})})]})})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Size:  ",R("lineHeight",1.2).toFixed(1),"rem"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0.5",max:"3",step:"0.1",value:R("lineHeight",1.2),onChange:e=>I("lineHeight",parseFloat(e.target.value)||1.2)})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Size:  ",R("letterSpacing",0).toFixed(1),"px"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"-5",max:"20",step:"0.5",value:R("letterSpacing",0),onChange:e=>I("letterSpacing",parseFloat(e.target.value)||0)})]})})]}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Max Width: ",R("textMaxWidth",300),"px"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"50",max:"800",step:"10",value:R("textMaxWidth",300),onChange:e=>I("textMaxWidth",parseInt(e.target.value)||300)})]})})]})}function ez(){let{strokeColor:e,setStrokeColor:i,fillColor:n,setFillColor:r,strokeWidth:s,setStrokeWidth:o,opacity:d,setOpacity:h,blendMode:c,setBlendMode:x,backgroundColor:u,setBackgroundColor:y,gridColor:f,setGridColor:v,guideColor:b,setGuideColor:k,gridVisible:j,setGridVisible:w,rulersVisible:M,setRulersVisible:S,guides:_,setGuides:C,guidesLocked:z,setGuidesLocked:N,layers:$,setLayers:P,addLayer:T,deleteLayer:B,moveLayer:I,duplicateLayer:W,updateLayer:A,activeLayerId:D,setActiveLayerId:R,elements:G,updateElement:L,selectedElementIds:V,deleteSelectedElements:H,duplicateSelectedElements:q,aspectRatio:F,setAspectRatio:K,baseWidth:Y,zoom:X,tool:O,spikes:U,setSpikes:J,strokeStyle:eb,setStrokeStyle:ek,lineCap:ej,setLineCap:ew,arrowType:eM,setArrowType:eS,snapToGrid:e_,setSnapToGrid:ez,snapToScale:eN,setSnapToScale:e$,snapToGuides:eP,setSnapToGuides:eT,cornerRadius:eE,setCornerRadius:eB}=l(),[eI,eW]=(0,a.useState)("png"),[eA,eD]=(0,a.useState)(1),eR=G.filter(e=>V.includes(e.id)),eG=1===eR.length,eL=eR.length>1,eV=eG?eR[0]:null,eH=eV&&eV.strokeColor||e,eq=eV&&eV.fillColor||n,eF=eV?eV.strokeWidth??s:s,eK=eV?eV.opacity??d:d,eY=eV?eV.cornerRadius??eE:eE,eX=(e,t)=>{(eL||eG)&&V.forEach(a=>L(a,{[e]:t})),(eG||0===V.length)&&("strokeColor"===e&&i(t),"fillColor"===e&&r(t),"strokeWidth"===e&&o(parseInt(t)),"opacity"===e&&h(parseFloat(t)),"strokeStyle"===e&&ek(t),"blendMode"===e&&x(t),"lineCap"===e&&ew(t),"arrowType"===e&&eS(t),"spikes"===e&&J(parseInt(t)),"cornerRadius"===e&&eB(parseInt(t)))},eO=e=>{if(V.length<1)return;let t=Math.min(...eR.map(e=>e.x)),a=Math.max(...eR.map(e=>e.x+(e.width||0))),i=Math.min(...eR.map(e=>e.y)),l=Math.max(...eR.map(e=>e.y+(e.height||0)));V.forEach(n=>{let r=G.find(e=>e.id===n);"left"===e&&L(n,{x:t}),"right"===e&&L(n,{x:a-(r.width||0)}),"top"===e&&L(n,{y:i}),"bottom"===e&&L(n,{y:l-(r.height||0)}),"centerX"===e&&L(n,{x:(t+a)/2-(r.width||0)/2}),"centerY"===e&&L(n,{y:(i+l)/2-(r.height||0)/2})})},eU=e=>{if(!(V.length<2)){if("spaceBetweenX"===e||"spaceAroundX"===e||"distributeX"===e){let t=[...eR].sort((e,t)=>e.x-t.x),a=Math.min(...t.map(e=>e.x)),i=Math.max(...t.map(e=>e.x+(e.width||0)))-a-t.reduce((e,t)=>e+(t.width||0),0),l=0;if("spaceBetweenX"===e)l=t.length>1?i/(t.length-1):0;else if("spaceAroundX"===e)l=t.length>0?i/t.length:0;else if("distributeX"===e){let e=t[0].x+(t[0].width||0)/2,a=t[t.length-1].x+(t[t.length-1].width||0)/2,i=t.length>1?(a-e)/(t.length-1):0;t.forEach((t,a)=>{L(t.id,{x:e+i*a-(t.width||0)/2})});return}let n=a;"spaceAroundX"===e&&(n+=l/2),t.forEach((t,a)=>{(a>0||"spaceAroundX"===e)&&(n+="spaceBetweenX"===e&&a>0||"spaceAroundX"===e?l:0),L(t.id,{x:n}),n+=t.width||0})}if("spaceBetweenY"===e||"spaceAroundY"===e||"distributeY"===e){let t=[...eR].sort((e,t)=>e.y-t.y),a=Math.min(...t.map(e=>e.y)),i=Math.max(...t.map(e=>e.y+(e.height||0)))-a-t.reduce((e,t)=>e+(t.height||0),0),l=0;if("spaceBetweenY"===e)l=t.length>1?i/(t.length-1):0;else if("spaceAroundY"===e)l=t.length>0?i/t.length:0;else if("distributeY"===e){let e=t[0].y+(t[0].height||0)/2,a=t[t.length-1].y+(t[t.length-1].height||0)/2,i=t.length>1?(a-e)/(t.length-1):0;t.forEach((t,a)=>{L(t.id,{y:e+i*a-(t.height||0)/2})});return}let n=a;"spaceAroundY"===e&&(n+=l/2),t.forEach((t,a)=>{(a>0||"spaceAroundY"===e)&&(n+="spaceBetweenY"===e&&a>0||"spaceAroundY"===e?l:0),L(t.id,{y:n}),n+=t.height||0})}}};return(0,t.jsxs)("div",{className:Z.default.panel,children:[(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:"Canvas"}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Background"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:"transparent"===u?"#ffffff":u,onChange:e=>y(e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>y("transparent"===u?"#ffffff":"transparent"),title:"transparent"===u?"Show Background":"Transparent Background",children:"transparent"===u?(0,t.jsx)(ei,{size:16,color:"#666"}):(0,t.jsx)(ea,{size:16,color:"#fff"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Grid"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:f,onChange:e=>v(e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>w(!j),title:j?"Hide Grid":"Show Grid",children:j?(0,t.jsx)(ea,{size:16,color:"#fff"}):(0,t.jsx)(ei,{size:16,color:"#666"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Guides"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:b,onChange:e=>k(e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>S(!M),title:M?"Hide Rulers":"Show Rulers",children:M?(0,t.jsx)(ea,{size:16,color:"#fff"}):(0,t.jsx)(ei,{size:16,color:"#666"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Aspect Ratio"}),(0,t.jsxs)("select",{className:Z.default.input,value:F?`${F.w}:${F.h}`:"16:9",onChange:e=>{let[t,a]=e.target.value.split(":").map(Number);K({w:t,h:a})},children:[(0,t.jsx)("option",{value:"16:9",children:"16:9"}),(0,t.jsx)("option",{value:"4:3",children:"4:3"}),(0,t.jsx)("option",{value:"1:1",children:"1:1"}),(0,t.jsx)("option",{value:"9:16",children:"9:16"}),(0,t.jsx)("option",{value:"3:4",children:"3:4"}),(0,t.jsx)("option",{value:"1.91:1",children:"1.91:1"})]})]}),(0,t.jsx)("div",{className:Z.default.controlGroup,style:{marginTop:12},children:(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,t.jsxs)("label",{onClick:()=>ez(!e_),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Snap to Grid",children:e_?(0,t.jsx)(ev,{size:16,style:{color:"var(--secondary-200)"}}):(0,t.jsx)(p,{size:16})}),(0,t.jsx)("span",{children:"Snap to Grid"})]}),(0,t.jsxs)("label",{onClick:()=>e$(!eN),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Snap to Scale",children:eN?(0,t.jsx)(ev,{size:16,style:{color:"var(--secondary-200)"}}):(0,t.jsx)(p,{size:16})}),(0,t.jsx)("span",{children:"Snap to Scale"})]}),(0,t.jsxs)("label",{onClick:()=>eT(!eP),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Snap to Guides",children:eP?(0,t.jsx)(ev,{size:16,style:{color:"var(--secondary-200)"}}):(0,t.jsx)(p,{size:16})}),(0,t.jsx)("span",{children:"Snap to Guides"})]}),(0,t.jsxs)("label",{onClick:()=>N(!z),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:z?"Unlock Guides":"Lock Guides",children:z?(0,t.jsx)(g,{size:16,color:"var(--secondary-200)"}):(0,t.jsx)(m,{size:16,color:"var(--neutral-9)"})}),(0,t.jsx)("span",{children:"Lock Guides"})]}),(0,t.jsxs)("label",{onClick:()=>{_.length>0&&C([])},style:{display:"flex",alignItems:"center",gap:8,cursor:_.length>0?"pointer":"default",fontSize:"var(--font-caption)",color:_.length>0?"var(--neutral-11)":"var(--neutral-7)",opacity:_.length>0?1:.5},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Clear All Guides",children:(0,t.jsx)(Q,{size:16,color:_.length>0?"#ff5555":"var(--neutral-7)"})}),(0,t.jsx)("span",{children:"Delete Guides"})]})]})})]}),(0,t.jsx)("hr",{className:Z.default.divider}),(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:V.length>0?`Selected (${V.length})`:"Properties"}),V.length>0&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:0},children:[(0,t.jsx)("button",{onClick:q,className:Z.default.iconBtn,title:"Duplicate Selected (Ctrl+D)",children:(0,t.jsx)(em,{size:14})}),(0,t.jsx)("button",{onClick:H,className:Z.default.iconBtn,title:"Delete Selected",children:(0,t.jsx)(Q,{size:14,color:"#ff5555"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("div",{className:Z.default.label,children:[(0,t.jsx)(ef,{size:16}),"Fill"]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:"transparent"===eq?"#ffffff":eq,onChange:e=>eX("fillColor",e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>eX("fillColor","transparent"===eq?"#000000":"transparent"),title:"transparent"===eq?"Enable Fill":"Disable Fill",children:"transparent"===eq?(0,t.jsx)(ei,{size:16,color:"#666"}):(0,t.jsx)(ea,{size:16,color:"#fff"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("div",{className:Z.default.label,children:[(0,t.jsx)(eg,{size:16}),"Stroke"]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:"transparent"===eH?"#ffffff":eH,onChange:e=>eX("strokeColor",e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>eX("strokeColor","transparent"===eH?"#000000":"transparent"),title:"transparent"===eH?"Enable Stroke":"Disable Stroke",children:"transparent"===eH?(0,t.jsx)(ei,{size:16,color:"#666"}):(0,t.jsx)(ea,{size:16,color:"#fff"})})]})]}),(0,t.jsxs)("div",{className:Z.default.controlGroup,style:{opacity:"transparent"===eH?.5:1,pointerEvents:"transparent"===eH?"none":"auto"},children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Width: ",eF,"px"]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"50",value:eF,onChange:e=>eX("strokeWidth",e.target.valueAsNumber||parseInt(e.target.value))})]}),(eV?.type==="rect"||eV?.type==="square"||!eV&&("rect"===O||"square"===O))&&(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Corner Radius: ",eY,"px"]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"200",value:eY,onChange:e=>eX("cornerRadius",e.target.valueAsNumber||parseInt(e.target.value))})]}),(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Opacity: ",Math.round(100*eK),"%"]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"1",step:"0.01",value:eK,onChange:e=>eX("opacity",e.target.valueAsNumber||parseFloat(e.target.value))})]}),(eV?.type==="star"||!eV&&"star"===O)&&(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Spikes: ",eV?eV.spikes||5:U]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"3",max:"20",step:"1",value:eV?eV.spikes||5:U,onChange:e=>eX("spikes",e.target.valueAsNumber||parseInt(e.target.value))})]}),eV?.type==="arrow"&&(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,style:{fontSize:11},children:"Arrow Head"}),(0,t.jsxs)("select",{className:Z.default.input,style:{width:"60%"},value:eV.arrowType||eM,onChange:e=>eX("arrowType",e.target.value),children:[(0,t.jsx)("option",{value:"triangle",children:"Triangle"}),(0,t.jsx)("option",{value:"circle",children:"Circle"}),(0,t.jsx)("option",{value:"diamond",children:"Diamond"}),(0,t.jsx)("option",{value:"simple",children:"Simple (Line)"})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("select",{className:Z.default.input,style:{width:"48%"},value:eV?.strokeStyle||eb,onChange:e=>eX("strokeStyle",e.target.value),children:[(0,t.jsx)("option",{value:"solid",children:"Solid"}),(0,t.jsx)("option",{value:"dashed",children:"Dashed"}),(0,t.jsx)("option",{value:"dotted",children:"Dotted"}),(0,t.jsx)("option",{value:"loose",children:"Loose"})]}),(0,t.jsxs)("select",{className:Z.default.input,style:{width:"48%"},value:eV?.lineCap||ej,onChange:e=>eX("lineCap",e.target.value),children:[(0,t.jsx)("option",{value:"round",children:"Round Cap"}),(0,t.jsx)("option",{value:"butt",children:"Flat Cap"}),(0,t.jsx)("option",{value:"square",children:"Square Cap"})]})]}),eL&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("span",{style:{fontSize:10,color:"#888",display:"block",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Align"}),(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Horizontal"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>eO("left"),className:Z.default.iconBtn,title:"Align Left",style:{flex:1,padding:"6px"},children:(0,t.jsx)(el,{size:16})}),(0,t.jsx)("button",{onClick:()=>eO("centerX"),className:Z.default.iconBtn,title:"Align Center",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ed,{size:16})}),(0,t.jsx)("button",{onClick:()=>eO("right"),className:Z.default.iconBtn,title:"Align Right",style:{flex:1,padding:"6px"},children:(0,t.jsx)(en,{size:16})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Vertical"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>eO("top"),className:Z.default.iconBtn,title:"Align Top",style:{flex:1,padding:"6px"},children:(0,t.jsx)(er,{size:16})}),(0,t.jsx)("button",{onClick:()=>eO("centerY"),className:Z.default.iconBtn,title:"Align Center",style:{flex:1,padding:"6px"},children:(0,t.jsx)(eo,{size:16})}),(0,t.jsx)("button",{onClick:()=>eO("bottom"),className:Z.default.iconBtn,title:"Align Bottom",style:{flex:1,padding:"6px"},children:(0,t.jsx)(es,{size:16})})]})]})]}),(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("span",{style:{fontSize:10,color:"#888",display:"block",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Distribute"}),(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Horizontal"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>eU("spaceBetweenX"),className:Z.default.iconBtn,title:"Space Between",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ex,{size:16})}),(0,t.jsx)("button",{onClick:()=>eU("spaceAroundX"),className:Z.default.iconBtn,title:"Space Around",style:{flex:1,padding:"6px"},children:(0,t.jsx)(eu,{size:16})}),(0,t.jsx)("button",{onClick:()=>eU("distributeX"),className:Z.default.iconBtn,title:"Distribute Evenly",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ey,{size:16})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Vertical"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>eU("spaceBetweenY"),className:Z.default.iconBtn,title:"Space Between",style:{flex:1,padding:"6px"},children:(0,t.jsx)(eh,{size:16})}),(0,t.jsx)("button",{onClick:()=>eU("spaceAroundY"),className:Z.default.iconBtn,title:"Space Around",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ec,{size:16})}),(0,t.jsx)("button",{onClick:()=>eU("distributeY"),className:Z.default.iconBtn,title:"Distribute Evenly",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ep,{size:16})})]})]})]})]}),(eV?.type==="text"||!eV&&"text"===O)&&(0,t.jsx)(eC,{})]}),(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:"Layers"}),(0,t.jsx)("button",{onClick:T,className:Z.default.iconBtn,style:{border:"1px solid #555"},children:"+ Add"})]}),(0,t.jsx)("div",{className:Z.default.layerList,children:$.map((e,a)=>(0,t.jsxs)("div",{className:`${Z.default.layerItem} ${D===e.id?Z.default.layerActive:""}`,onClick:()=>R(e.id),children:[(0,t.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,width:"100%"},children:[(0,t.jsx)("span",{style:{fontSize:13},children:e.name}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"1",step:"0.1",value:void 0!==e.opacity?e.opacity:1,onClick:e=>e.stopPropagation(),onChange:t=>A(e.id,{opacity:parseFloat(t.target.value)}),style:{width:70,marginTop:4}})})]}),(0,t.jsxs)("div",{className:Z.default.layerControls,children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id,{locked:!e.locked})},className:Z.default.layerBtn,title:e.locked?"Unlock Layer":"Lock Layer",children:e.locked?(0,t.jsx)(g,{size:13,color:"var(--secondary-200)"}):(0,t.jsx)(m,{size:13})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id,{visible:!e.visible})},className:Z.default.layerBtn,children:e.visible?(0,t.jsx)(ea,{size:13}):(0,t.jsx)(ei,{size:13})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),W(e.id)},className:Z.default.layerBtn,title:"Duplicate Layer",children:(0,t.jsx)(em,{size:13})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),B(e.id)},className:Z.default.layerBtn,children:(0,t.jsx)(Q,{size:13,color:"var(--primary-350)"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),I(a,"up")},className:Z.default.layerBtn,children:(0,t.jsx)(ee,{size:13})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),I(a,"down")},className:Z.default.layerBtn,children:(0,t.jsx)(et,{size:13})})]})]},e.id))})]}),(0,t.jsx)("hr",{className:Z.default.divider}),(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:"Export"}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("select",{value:eI,onChange:e=>eW(e.target.value),className:Z.default.input,style:{width:"48%"},children:[(0,t.jsx)("option",{value:"png",children:"PNG"}),(0,t.jsx)("option",{value:"jpeg",children:"JPG"}),(0,t.jsx)("option",{value:"webp",children:"WEBP"}),(0,t.jsx)("option",{value:"svg",children:"SVG"})]}),"svg"!==eI&&(0,t.jsxs)("select",{value:eA,onChange:e=>eD(Number(e.target.value)),className:Z.default.input,style:{width:"48%"},children:[(0,t.jsx)("option",{value:1,children:"1x"}),(0,t.jsx)("option",{value:2,children:"2x"}),(0,t.jsx)("option",{value:3,children:"3x"}),(0,t.jsx)("option",{value:4,children:"4x"})]})]}),(0,t.jsxs)("button",{onClick:()=>{let e=Y/F.w*F.h;if("svg"===eI){let t=`<svg xmlns="http://www.w3.org/2000/svg" width="${Y}" height="${e}" viewBox="0 0 ${Y} ${e}">`;"transparent"!==u&&(t+=`<rect width="${Y}" height="${e}" fill="${u}"/>`),[...$].reverse().forEach(e=>{if(!e.visible)return;let a=void 0!==e.opacity?e.opacity:1;G.filter(t=>t.layerId===e.id).forEach(e=>{let i=(void 0!==e.opacity?e.opacity:1)*a;t+=((e,t)=>{let{type:a,x:i,y:l,width:n,height:r,strokeColor:s,fillColor:o,strokeWidth:d,rotation:h,strokeStyle:c,lineCap:x,arrowType:u,spikes:p,points:y,isNormalized:f,cornerRadius:g}=e,m="",v=h?` transform="rotate(${h} ${i+n/2} ${l+r/2})"`:"",b="dashed"===c?'stroke-dasharray="15,10"':"dotted"===c?'stroke-dasharray="2,5"':"loose"===c?'stroke-dasharray="25,15"':"",k=x||"round",j="transparent"===o?"none":o,w="transparent"===s?"none":s;switch(a){case"rect":case"square":let M=g?Math.min(g,Math.abs(n)/2):0,S=g?Math.min(g,Math.abs(r)/2):0;m=`<rect x="${i}" y="${l}" width="${n}" height="${r}" rx="${M}" ry="${S}" fill="${j}" stroke="${w}" stroke-width="${d}" opacity="${t}"${v} ${b} stroke-linecap="${k}"/>`;break;case"circle":let _=Math.abs(n)/2,C=Math.abs(r)/2;m=`<ellipse cx="${i+n/2}" cy="${l+r/2}" rx="${_}" ry="${C}" fill="${j}" stroke="${w}" stroke-width="${d}" opacity="${t}"${v} ${b} stroke-linecap="${k}"/>`;break;case"triangle":m=`<polygon points="${i+n/2},${l} ${i},${l+r} ${i+n},${l+r}" fill="${j}" stroke="${w}" stroke-width="${d}" opacity="${t}"${v} ${b} stroke-linecap="${k}"/>`;break;case"line":case"arrow":m=`<line x1="${i}" y1="${l}" x2="${i+n}" y2="${l+r}" stroke="${w}" stroke-width="${d}" opacity="${t}"${v} ${b} stroke-linecap="${k}"/>`;break;case"star":let z=i+n/2,N=l+r/2,$=Math.min(Math.abs(n),Math.abs(r))/2,P=$/2,T=[],E=p||5;for(let e=0;e<2*E;e++){let t=Math.PI/2*3+Math.PI/E*e,a=e%2==0?$:P;T.push(`${z+Math.cos(t)*a},${N+Math.sin(t)*a}`)}m=`<polygon points="${T.join(" ")}" fill="${j}" stroke="${w}" stroke-width="${d}" opacity="${t}"${v} ${b} stroke-linecap="${k}"/>`;break;case"pencil":if(y&&y.length>0){let e=y.map((e,t)=>{let a=f?{x:i+e.x*n,y:l+e.y*r}:e;return`${0===t?"M":"L"} ${a.x} ${a.y}`}).join(" ");m=`<path d="${e}" fill="none" stroke="${w}" stroke-width="${d}" opacity="${t}"${v} ${b} stroke-linecap="${k}"/>`}break;case"text":if(e.textContent&&!1!==e.textVisible){let a=e.textContent.split("\n"),r=e.fontSize||24,s=(e.lineHeight||1.2)*r,o=e.fontFamily||"Google Sans",d=e.fontWeight||"400",h=e.fontStyle||"normal",c=e.textColor||"#000000",x=e.textAlign||"left",u=e.letterSpacing||0,p=i;"center"===x?p=i+n/2:"right"===x&&(p=i+n);let y="";a.forEach((a,i)=>{y+=`<text x="${p}" y="${l+r+i*s}" font-family="${o}" font-size="${r}" font-weight="${d}" font-style="${h}" fill="${c}" text-anchor="${"center"===x?"middle":"right"===x?"end":"start"}" letter-spacing="${u}" opacity="${t}"${v}>`,e.textDecoration&&"none"!==e.textDecoration?e.textDecoration.includes("underline")?y+=`<tspan text-decoration="underline">${a}</tspan>`:e.textDecoration.includes("line-through")?y+=`<tspan text-decoration="line-through">${a}</tspan>`:y+=a:y+=a,y+="</text>"}),m=y}}return m})(e,i)})});let a=new Blob([t+="</svg>"],{type:"image/svg+xml"}),i=URL.createObjectURL(a),l=document.createElement("a");l.download="drawing.svg",l.href=i,l.click(),URL.revokeObjectURL(i)}else{let t=document.createElement("canvas");t.width=Y*eA,t.height=e*eA;let a=t.getContext("2d");a.scale(eA,eA),"transparent"!==u&&(a.fillStyle=u,a.fillRect(0,0,Y,e)),[...$].reverse().forEach(e=>{e.visible&&G.filter(t=>t.layerId===e.id).forEach(e=>E(a,e))});let i=document.createElement("a");i.download=`drawing-x${eA}.${eI}`,i.href=t.toDataURL(`image/${eI}`),i.click()}},className:Z.default.exportBtn,children:[(0,t.jsx)(et,{strokeWidth:2.5,size:16}),"Download ","svg"===eI?"SVG":"Image"]})]})]})}let eN=c("monitor-off",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var e$=e.i(20897);let eP=()=>(0,t.jsxs)("div",{className:e$.default.responsiveWarning,children:[(0,t.jsx)("div",{className:e$.default.warningIcon,children:(0,t.jsx)(eN,{size:64,strokeWidth:1.5})}),(0,t.jsx)("h1",{className:e$.default.warningTitle,children:"Device Not Supported"}),(0,t.jsxs)("p",{className:e$.default.warningText,children:["This editor requires a larger screen for the best experience. Please visit on a device with a width of 1280px or more, or try the ",(0,t.jsx)("strong",{children:"Desktop View"})," on your mobile browser."]})]});function eT(){return(0,t.jsxs)(n,{children:[(0,t.jsx)(eP,{}),(0,t.jsxs)("main",{className:e$.default.main,children:[(0,t.jsx)(P,{}),(0,t.jsx)(V,{}),(0,t.jsx)(ez,{})]})]})}e.s(["default",()=>eT],74647)}]);