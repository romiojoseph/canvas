(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69062,e=>{e.v({active:"Toolbar-module__cTID5a__active",button:"Toolbar-module__cTID5a__button",logo:"Toolbar-module__cTID5a__logo",toolbar:"Toolbar-module__cTID5a__toolbar",tooltip:"Toolbar-module__cTID5a__tooltip",tooltipHeading:"Toolbar-module__cTID5a__tooltipHeading",tooltipText:"Toolbar-module__cTID5a__tooltipText"})},9565,e=>{e.v({actions:"Modal-module__dhVKKa__actions",btn:"Modal-module__dhVKKa__btn",cancel:"Modal-module__dhVKKa__cancel",confirm:"Modal-module__dhVKKa__confirm",modal:"Modal-module__dhVKKa__modal",overlay:"Modal-module__dhVKKa__overlay"})},33436,e=>{e.v({canvasWrapper:"CanvasBoard-module__EDaARq__canvasWrapper",clearGuides:"CanvasBoard-module__EDaARq__clearGuides",container:"CanvasBoard-module__EDaARq__container",logo:"CanvasBoard-module__EDaARq__logo",rulerX:"CanvasBoard-module__EDaARq__rulerX",rulerY:"CanvasBoard-module__EDaARq__rulerY",zBtn:"CanvasBoard-module__EDaARq__zBtn",zoomControls:"CanvasBoard-module__EDaARq__zoomControls",zoomIndicator:"CanvasBoard-module__EDaARq__zoomIndicator"})},51036,e=>{e.v({actionIconBtn:"Properties-module__0nsVcG__actionIconBtn",active:"Properties-module__0nsVcG__active",buttonGroup:"Properties-module__0nsVcG__buttonGroup",checkboxRow:"Properties-module__0nsVcG__checkboxRow",colorInput:"Properties-module__0nsVcG__colorInput",colorPicker:"Properties-module__0nsVcG__colorPicker",controlGroup:"Properties-module__0nsVcG__controlGroup",divider:"Properties-module__0nsVcG__divider",exportBtn:"Properties-module__0nsVcG__exportBtn",iconBtn:"Properties-module__0nsVcG__iconBtn",iconButton:"Properties-module__0nsVcG__iconButton",input:"Properties-module__0nsVcG__input",label:"Properties-module__0nsVcG__label",layerActive:"Properties-module__0nsVcG__layerActive",layerBtn:"Properties-module__0nsVcG__layerBtn",layerControls:"Properties-module__0nsVcG__layerControls",layerItem:"Properties-module__0nsVcG__layerItem",layerList:"Properties-module__0nsVcG__layerList",panel:"Properties-module__0nsVcG__panel",row:"Properties-module__0nsVcG__row",section:"Properties-module__0nsVcG__section",sectionHeader:"Properties-module__0nsVcG__sectionHeader",sectionLabel:"Properties-module__0nsVcG__sectionLabel",select:"Properties-module__0nsVcG__select",slider:"Properties-module__0nsVcG__slider",textButton:"Properties-module__0nsVcG__textButton",textarea:"Properties-module__0nsVcG__textarea",tinyBtn:"Properties-module__0nsVcG__tinyBtn",workingRow:"Properties-module__0nsVcG__workingRow"})},20897,e=>{e.v({main:"page-module___8aEwW__main",responsiveWarning:"page-module___8aEwW__responsiveWarning",warningIcon:"page-module___8aEwW__warningIcon",warningText:"page-module___8aEwW__warningText",warningTitle:"page-module___8aEwW__warningTitle"})},74647,e=>{"use strict";var t=e.i(43476),i=e.i(71645);let a=(0,i.createContext)(),l=()=>(0,i.useContext)(a),n=({children:e})=>{let[l,n]=(0,i.useState)({w:16,h:9}),[r]=(0,i.useState)(1200),[s,o]=(0,i.useState)(!0),[d,h]=(0,i.useState)(!0),[c,x]=(0,i.useState)("#ffffff"),[u,p]=(0,i.useState)("#e0e0e0"),[y,f]=(0,i.useState)("#ff00ff"),[g]=(0,i.useState)("dark"),[m,v]=(0,i.useState)(!0),[k,w]=(0,i.useState)(!0),[b,j]=(0,i.useState)(!0),[M,S]=(0,i.useState)(.8),[_,C]=(0,i.useState)({x:50,y:50}),[z,N]=(0,i.useState)([]),[$,I]=(0,i.useState)(!1),[P,B]=(0,i.useState)("pencil"),[T,E]=(0,i.useState)("#000000"),[D,A]=(0,i.useState)("transparent"),[W,R]=(0,i.useState)(2),[G,L]=(0,i.useState)(0),[V,H]=(0,i.useState)(!1),[F,q]=(0,i.useState)("Sample Text"),[K,Y]=(0,i.useState)("Google Sans"),[X,U]=(0,i.useState)(24),[O,J]=(0,i.useState)("400"),[Z,Q]=(0,i.useState)("normal"),[ee,et]=(0,i.useState)("none"),[ei,ea]=(0,i.useState)("left"),[el,en]=(0,i.useState)(1.2),[er,es]=(0,i.useState)(0),[eo,ed]=(0,i.useState)("#000000"),[eh,ec]=(0,i.useState)(!0),[ex,eu]=(0,i.useState)(300),[ep,ey]=(0,i.useState)(1),[ef,eg]=(0,i.useState)("solid"),[em,ev]=(0,i.useState)("round"),[ek,ew]=(0,i.useState)("triangle"),[eb,ej]=(0,i.useState)({color:"#000000",blur:0,x:0,y:0}),[eM,eS]=(0,i.useState)("source-over"),[e_,eC]=(0,i.useState)(5),[ez,eN]=(0,i.useState)([{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),[e$,eI]=(0,i.useState)("layer-1"),[eP,eB]=(0,i.useState)([]),[eT,eE]=(0,i.useState)([]),[eD,eA]=(0,i.useState)([]),[eW,eR]=(0,i.useState)(-1);(0,i.useEffect)(()=>{let e=localStorage.getItem("canvas-project-v2");if(e)try{let t=JSON.parse(e);eB(t.elements||[]),eN(t.layers||[{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),n(t.aspectRatio||{w:16,h:9})}catch(e){console.error(e)}},[]),(0,i.useEffect)(()=>{document.body.setAttribute("data-theme",g)},[g]),(0,i.useEffect)(()=>{(eP.length>0||ez.length>1)&&localStorage.setItem("canvas-project-v2",JSON.stringify({elements:eP,layers:ez,aspectRatio:l}))},[eP,ez,l]),(0,i.useEffect)(()=>{if(0===eT.length)return;let e=eT.filter(e=>{let t=eP.find(t=>t.id===e);if(!t)return!1;let i=ez.find(e=>e.id===t.layerId);return i&&!i.locked&&i.visible});e.length!==eT.length&&eE(e)},[ez,eP,eT]);let eG=(0,i.useCallback)((e,t)=>{let i=void 0!==e?e:eP,a=void 0!==t?t:ez,l=eD.slice(0,eW+1);l.push({elements:[...i],layers:[...a]}),eA(l),eR(l.length-1)},[eD,eW,eP,ez]),eL=()=>{if(0===eT.length)return;let e=eP.filter(e=>!eT.includes(e.id));eB(e),eE([]),eG(e)},eV=()=>{if(0===eT.length)return;let e=eP.filter(e=>eT.includes(e.id));localStorage.setItem("canvas-clipboard",JSON.stringify(e))};return(0,t.jsx)(a.Provider,{value:{tool:P,setTool:B,strokeColor:T,setStrokeColor:E,fillColor:D,setFillColor:A,strokeWidth:W,setStrokeWidth:R,cornerRadius:G,setCornerRadius:L,opacity:ep,setOpacity:ey,strokeStyle:ef,setStrokeStyle:eg,lineCap:em,setLineCap:ev,arrowType:ek,setArrowType:ew,shadow:eb,setShadow:ej,blendMode:eM,setBlendMode:eS,spikes:e_,setSpikes:eC,isRatioLocked:V,setIsRatioLocked:H,gridVisible:s,setGridVisible:o,rulersVisible:d,setRulersVisible:h,backgroundColor:c,setBackgroundColor:x,gridColor:u,setGridColor:p,guideColor:y,setGuideColor:f,zoom:M,setZoom:S,panOffset:_,setPanOffset:C,theme:g,guides:z,setGuides:N,layers:ez,setLayers:eN,addLayer:()=>{let e=`layer-${Date.now()}`,t=[{id:e,name:`Layer ${ez.length+1}`,visible:!0,locked:!1},...ez];eN(t),eI(e),eG(eP,t)},deleteLayer:e=>{if(1===ez.length)return;let t=ez.filter(t=>t.id!==e),i=eP.filter(t=>t.layerId!==e);eN(t),eB(i),e$===e&&eI(t[0].id),eG(i,t)},moveLayer:(e,t)=>{let i=[...ez];"up"===t&&e>0?[i[e],i[e-1]]=[i[e-1],i[e]]:"down"===t&&e<i.length-1&&([i[e],i[e+1]]=[i[e+1],i[e]]),eN(i),eG(eP,i)},duplicateLayer:e=>{let t=ez.find(t=>t.id===e);if(!t)return;let i=`layer-${Date.now()}`,a={...t,id:i,name:`${t.name} Copy`},l=ez.findIndex(t=>t.id===e),n=[...ez];n.splice(l+1,0,a);let r=eP.filter(t=>t.layerId===e).map(e=>({...e,id:Date.now()+Math.random(),layerId:i,x:e.x+20,y:e.y+20})),s=[...eP,...r];eN(n),eB(s),eI(i),eG(s,n)},updateLayer:(e,t)=>{let i=ez.map(i=>i.id===e?{...i,...t}:i);eN(i),eG(eP,i)},activeLayerId:e$,setActiveLayerId:eI,elements:eP,setElements:eB,addElement:e=>{let t={id:Date.now(),layerId:e$,opacity:ep,strokeStyle:ef,lineCap:em,arrowType:ek,shadow:eb,blendMode:eM,rotation:0,isLocked:!1,...e},i=[...eP,t];return eB(i),eG(i),t},updateElement:(e,t,i=!0)=>{eB(a=>{let l=a.map(i=>i.id===e?{...i,...t}:i);return i&&eG(l),l})},batchUpdateElements:(e,t=!0)=>{eB(e),t&&eG(e)},deleteSelectedElements:eL,duplicateSelectedElements:()=>{if(0===eT.length)return;let e=eP.filter(e=>eT.includes(e.id)).map(e=>({...e,id:Date.now()+Math.random(),x:e.x+20,y:e.y+20})),t=[...eP,...e];eB(t),eE(e.map(e=>e.id)),eG(t)},bringToFront:()=>{if(0===eT.length)return;let e=new Set(eT),t=eP.filter(t=>e.has(t.id)),i=[...eP.filter(t=>!e.has(t.id)),...t];eB(i),eG(i,ez)},sendToBack:()=>{if(0===eT.length)return;let e=new Set(eT),t=[...eP.filter(t=>e.has(t.id)),...eP.filter(t=>!e.has(t.id))];eB(t),eG(t,ez)},bringForward:()=>{if(0===eT.length)return;let e=[...eP];for(let t=e.length-2;t>=0;t--)eT.includes(e[t].id)&&!eT.includes(e[t+1].id)&&([e[t],e[t+1]]=[e[t+1],e[t]]);eB(e),eG(e,ez)},sendBackward:()=>{if(0===eT.length)return;let e=[...eP];for(let t=1;t<e.length;t++)eT.includes(e[t].id)&&!eT.includes(e[t-1].id)&&([e[t],e[t-1]]=[e[t-1],e[t]]);eB(e),eG(e,ez)},groupSelectedElements:()=>{if(eT.length<2)return;let e=`group-${Date.now()}`,t=eP.map(t=>{if(eT.includes(t.id)){let i=t.groupIds||(t.groupId?[t.groupId]:[]);return{...t,groupIds:[...i,e],groupId:e}}return t});eB(t),eG(t,ez)},ungroupSelectedElements:()=>{if(0===eT.length)return;let e=eP.find(e=>e.id===eT[0]);if(!e)return;let t=e.groupIds||(e.groupId?[e.groupId]:[]);if(0===t.length)return;let i=t[t.length-1],a=eP.map(e=>{let t=e.groupIds||(e.groupId?[e.groupId]:[]);if(t.includes(i)){let a=t.filter(e=>e!==i);return{...e,groupIds:a,groupId:a.length>0?a[a.length-1]:void 0}}return e});eB(a),eG(a,ez)},copySelectedElements:eV,cutSelectedElements:()=>{0!==eT.length&&(eV(),eL())},pasteElements:()=>{let e=localStorage.getItem("canvas-clipboard");if(e)try{let t=JSON.parse(e);if(!Array.isArray(t))return;let i=t.map(e=>({...e,id:Date.now()+Math.random(),x:e.x+20,y:e.y+20,layerId:e$})),a=[...eP,...i];eB(a),eE(i.map(e=>e.id)),eG(a)}catch(e){console.error("Paste failed",e)}},selectedElementIds:eT,setSelectedElementIds:eE,aspectRatio:l,setAspectRatio:n,baseWidth:r,undo:()=>{if(eW>0){let e=eW-1,t=eD[e];eB(t.elements),eN(t.layers),eR(e)}else 0===eW&&(eB([]),eN([{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),eR(-1))},redo:()=>{if(eW<eD.length-1){let e=eW+1,t=eD[e];eB(t.elements),eN(t.layers),eR(e)}},resetEditor:()=>{eB([]),eN([{id:"layer-1",name:"Layer 1",visible:!0,locked:!1}]),eI("layer-1"),eA([]),eR(-1),S(1),C({x:0,y:0}),localStorage.removeItem("canvas-project-v2")},snapToGrid:m,setSnapToGrid:v,snapToScale:k,setSnapToScale:w,snapToGuides:b,setSnapToGuides:j,guidesLocked:$,setGuidesLocked:I,textContent:F,setTextContent:q,fontFamily:K,setFontFamily:Y,fontSize:X,setFontSize:U,fontWeight:O,setFontWeight:J,fontStyle:Z,setFontStyle:Q,textDecoration:ee,setTextDecoration:et,textAlign:ei,setTextAlign:ea,lineHeight:el,setLineHeight:en,letterSpacing:er,setLetterSpacing:es,textColor:eo,setTextColor:ed,textVisible:eh,setTextVisible:ec,textMaxWidth:ex,setTextMaxWidth:eu},children:e})};var r=e.i(69062);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,i.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:n="",children:r,iconNode:s,...h},c)=>(0,i.createElement)("svg",{ref:c,...d,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:o("lucide",n),...!r&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...s.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(r)?r:[r]])),c=(e,t)=>{let a=(0,i.forwardRef)(({className:a,...l},n)=>(0,i.createElement)(h,{ref:n,iconNode:t,className:o(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...l}));return a.displayName=s(e),a},x=c("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),u=c("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),p=c("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),y=c("triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),f=c("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]),g=c("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),m=c("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),v=c("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),k=c("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]),w=c("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),b=c("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),j=c("move-right",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]),M=c("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),S=c("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),_=c("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),C=c("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);var z=e.i(9565);function N({isOpen:e,onClose:i,onConfirm:a}){return e?(0,t.jsx)("div",{className:z.default.overlay,children:(0,t.jsxs)("div",{className:z.default.modal,children:[(0,t.jsx)("h2",{children:"Reset Canvas?"}),(0,t.jsx)("p",{style:{color:"#ccc"},children:"This will clear all layers and drawings. This action cannot be undone."}),(0,t.jsxs)("div",{className:z.default.actions,children:[(0,t.jsx)("button",{className:`${z.default.btn} ${z.default.cancel}`,onClick:i,children:"Cancel"}),(0,t.jsx)("button",{className:`${z.default.btn} ${z.default.confirm}`,onClick:a,children:"Yes, Clear All"})]})]})}):null}let $=[{id:"select",icon:(0,t.jsx)(f,{size:18}),label:"Select (V)"},{id:"pan",icon:(0,t.jsx)(_,{size:18}),label:"Pan (Space)"},{id:"pencil",icon:(0,t.jsx)(x,{size:18}),label:"Free Draw (P)"},{id:"text",icon:(0,t.jsx)(C,{size:18}),label:"Text (T)"},{id:"eraser",icon:(0,t.jsx)(S,{size:18}),label:"Eraser (Draw to Erase)"},{id:"remover",icon:(0,t.jsx)(w,{size:18}),label:"Remover (Delete Objects)"},{id:"line",icon:(0,t.jsx)(b,{size:18}),label:"Line"},{id:"arrow",icon:(0,t.jsx)(j,{size:18}),label:"Arrow"},{id:"rect",icon:(0,t.jsx)(u,{size:18}),label:"Rectangle (R)"},{id:"circle",icon:(0,t.jsx)(p,{size:18}),label:"Circle"},{id:"triangle",icon:(0,t.jsx)(y,{size:18}),label:"Triangle"},{id:"star",icon:(0,t.jsx)(M,{size:18}),label:"Star"}];function I(){let{tool:e,setTool:a,undo:n,redo:s,resetEditor:o,isRatioLocked:d,setIsRatioLocked:h,setSelectedElementIds:c}=l(),[x,u]=(0,i.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:r.default.toolbar,children:[(0,t.jsxs)("div",{className:r.default.logo,children:[(0,t.jsx)("img",{src:"/canvas/bin/logo.svg",alt:"Logo",style:{width:24,height:24}}),(0,t.jsxs)("div",{className:r.default.tooltip,children:[(0,t.jsx)("span",{className:r.default.tooltipHeading,children:"Free Online Canvas Editor"}),(0,t.jsx)("p",{className:r.default.tooltipText,children:"Draw shapes, sketch freely, add text, rulers, grids, and layers, then export designs in multiple formats and scales. This is a vibe coded, browser based project."})]})]}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8,width:"100%",overflowY:"auto"},children:$.map(i=>(0,t.jsx)("button",{className:`${r.default.button} ${e===i.id?r.default.active:""} `,onClick:()=>{var e;a(e=i.id),"select"!==e&&c([])},title:i.label,children:i.icon},i.id))}),(0,t.jsxs)("div",{style:{padding:"8px 0",width:"100%"},children:[(0,t.jsx)("div",{style:{height:1,background:"var(--neutral-4)",width:"100%",marginBottom:8}}),(0,t.jsx)("button",{className:`${r.default.button} ${d?r.default.active:""}`,onClick:()=>h(!d),title:"Lock Ratio",children:d?(0,t.jsx)(g,{size:18}):(0,t.jsx)(m,{size:18})})]}),(0,t.jsxs)("div",{style:{marginTop:"auto",display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[(0,t.jsx)("button",{className:r.default.button,onClick:n,title:"Undo (Ctrl+Z)",children:(0,t.jsx)(v,{size:18})}),(0,t.jsx)("button",{className:r.default.button,onClick:s,title:"Redo (Ctrl+Y)",children:(0,t.jsx)(k,{size:18})}),(0,t.jsx)("button",{className:r.default.button,onClick:()=>u(!0),title:"Reset Canvas",style:{color:"#ff5555"},children:(0,t.jsx)(w,{size:18})})]})]}),(0,t.jsx)(N,{isOpen:x,onClose:()=>u(!1),onConfirm:()=>{o(),u(!1)}})]})}var P=e.i(33436);let B=(e,t,i=1)=>{let{type:a,x:l,y:n,width:r,height:s,strokeColor:o,fillColor:d,strokeWidth:h,points:c,rotation:x,opacity:u,strokeStyle:p,lineCap:y,lineJoin:f,arrowType:g,gradient:m}=t;e.save(),e.globalAlpha=(void 0!==u?u:1)*i,e.globalCompositeOperation=t.blendMode||"source-over",e.strokeStyle=o,e.lineWidth=h,e.lineCap=y||"round",e.lineJoin=f||"round","dashed"===p?e.setLineDash([15,10]):"dotted"===p?e.setLineDash([2,5]):"loose"===p?e.setLineDash([25,15]):e.setLineDash([]);let v=l+r/2,k=n+s/2;if(x&&(e.translate(v,k),e.rotate(x*Math.PI/180),e.translate(-v,-k)),m&&"none"!==m.type){let t;if("linear"===m.type)t=e.createLinearGradient(l,n,l+r,n+s);else{let i=Math.max(Math.abs(r),Math.abs(s))/2;t=e.createRadialGradient(v,k,0,v,k,i)}m.stops.forEach(e=>t.addColorStop(e.offset,e.color)),e.fillStyle=t}else e.fillStyle="transparent"===d?"rgba(0,0,0,0)":d;switch(e.beginPath(),a){case"rect":case"square":if(t.cornerRadius&&t.cornerRadius>0){let i=Math.min(Math.abs(r),Math.abs(s))/2,a=Math.min(t.cornerRadius,i);e.roundRect(l,n,r,s,a)}else e.rect(l,n,r,s);break;case"circle":e.ellipse(v,k,Math.abs(r)/2,Math.abs(s)/2,0,0,2*Math.PI);break;case"triangle":e.moveTo(l+r/2,n),e.lineTo(l,n+s),e.lineTo(l+r,n+s),e.closePath();break;case"line":e.moveTo(l,n),e.lineTo(l+r,n+s);break;case"arrow":e.moveTo(l,n),e.lineTo(l+r,n+s),T(e,l,n,l+r,n+s,h,g||"triangle");break;case"star":E(e,v,k,r,s,t.spikes||5);break;case"pencil":if(c&&c.length>0){let i=e=>t.isNormalized?{x:l+e.x*r,y:n+e.y*s}:e,a=i(c[0]);e.moveTo(a.x,a.y);for(let t=1;t<c.length-2;t++){let a=i(c[t]),l=i(c[t+1]),n=(a.x+l.x)/2,r=(a.y+l.y)/2;e.quadraticCurveTo(a.x,a.y,n,r)}if(c.length>2){let t=i(c[c.length-2]),a=i(c[c.length-1]);e.quadraticCurveTo(t.x,t.y,a.x,a.y)}}break;case"text":if(t.textContent&&!1!==t.textVisible){e.save();let i=t.fontWeight||"400",a=t.fontSize||24,r=t.fontFamily||"Google Sans",s=t.fontStyle||"normal";e.font=`${s} ${i} ${a}px "${r}", sans-serif`,e.fillStyle=t.textColor||"#000000",e.textBaseline="top";let o=(t.lineHeight||1.2)*a,d=t.letterSpacing||0,h=t.textMaxWidth||t.width||300,c=t.textContent.split("\n"),x=[];c.forEach(t=>{if(""===t.trim())return void x.push("");let i=t.split(" "),a="";for(let t of i){let i=a+(a?" ":"")+t;e.measureText(i).width+(i.length-1)*d>h&&""!==a?(x.push(a),a=t):a=i}a&&x.push(a)}),x.forEach((i,r)=>{let s=l,c=n+r*o;if("center"===t.textAlign?(s=l+h/2,e.textAlign="center"):"right"===t.textAlign?(s=l+h,e.textAlign="right"):e.textAlign="left",0!==d){let a=s;"center"===t.textAlign?a=s-(e.measureText(i).width+(i.length-1)*d)/2:"right"===t.textAlign&&(a=s-(e.measureText(i).width+(i.length-1)*d));for(let t=0;t<i.length;t++)e.fillText(i[t],a,c),a+=e.measureText(i[t]).width+d}else e.fillText(i,s,c);if(t.textDecoration&&"none"!==t.textDecoration){let l=e.measureText(i),n=0!==d?l.width+(i.length-1)*d:l.width;e.strokeStyle=t.textColor||"#000000",e.lineWidth=Math.max(1,a/20);let r=s;if("center"===t.textAlign?r=s-n/2:"right"===t.textAlign&&(r=s-n),t.textDecoration.includes("underline")){let t=c+.9*a;e.beginPath(),e.moveTo(r,t),e.lineTo(r+n,t),e.stroke()}if(t.textDecoration.includes("line-through")){let t=c+.5*a;e.beginPath(),e.moveTo(r,t),e.lineTo(r+n,t),e.stroke()}}}),e.restore()}return}"transparent"===d||["pencil","line","arrow"].includes(a)||e.fill(),"transparent"!==o&&e.stroke(),t.eraserPaths&&t.eraserPaths.length>0&&(e.globalCompositeOperation="destination-out",e.globalAlpha=1,e.setLineDash([]),t.eraserPaths.forEach(t=>{if(!t.points||0===t.points.length)return;e.beginPath();let i=Math.sqrt(Math.abs((t.baseWidth?r/t.baseWidth:1)*(t.baseHeight?s/t.baseHeight:1)));e.lineWidth=(t.strokeWidth||20)*i,e.lineCap="round",e.lineJoin="round";let a=e=>({x:l+e.x*r,y:n+e.y*s}),o=a(t.points[0]);e.moveTo(o.x,o.y);for(let i=1;i<t.points.length-2;i++){let l=a(t.points[i]),n=a(t.points[i+1]),r=(l.x+n.x)/2,s=(l.y+n.y)/2;e.quadraticCurveTo(l.x,l.y,r,s)}if(t.points.length>2){let i=a(t.points[t.points.length-2]),l=a(t.points[t.points.length-1]);e.quadraticCurveTo(i.x,i.y,l.x,l.y)}else if(2===t.points.length){let i=a(t.points[1]);e.lineTo(i.x,i.y)}e.stroke()}),e.globalCompositeOperation="source-over"),e.restore()},T=(e,t,i,a,l,n,r)=>{let s=15+n,o=Math.atan2(l-i,a-t);e.stroke(),e.beginPath(),"circle"===r?(e.arc(a,l,5+n/2,0,2*Math.PI),e.fill()):"diamond"===r?(e.moveTo(a,l),e.lineTo(a-s*Math.cos(o-Math.PI/8),l-s*Math.sin(o-Math.PI/8)),e.lineTo(a-1.5*s*Math.cos(o),l-1.5*s*Math.sin(o)),e.lineTo(a-s*Math.cos(o+Math.PI/8),l-s*Math.sin(o+Math.PI/8)),e.closePath(),e.fill()):"simple"===r?(e.moveTo(a,l),e.lineTo(a-s*Math.cos(o-Math.PI/6),l-s*Math.sin(o-Math.PI/6)),e.moveTo(a,l),e.lineTo(a-s*Math.cos(o+Math.PI/6),l-s*Math.sin(o+Math.PI/6)),e.stroke()):(e.moveTo(a,l),e.lineTo(a-s*Math.cos(o-Math.PI/6),l-s*Math.sin(o-Math.PI/6)),e.lineTo(a-s*Math.cos(o+Math.PI/6),l-s*Math.sin(o+Math.PI/6)),e.closePath(),e.fill())},E=(e,t,i,a,l,n=5)=>{let r=Math.min(Math.abs(a),Math.abs(l))/2,s=r/2,o=Math.PI/2*3,d=Math.PI/n;e.moveTo(t,i-r);for(let a=0;a<n;a++)e.lineTo(t+Math.cos(o)*r,i+Math.sin(o)*r),o+=d,e.lineTo(t+Math.cos(o)*s,i+Math.sin(o)*s),o+=d;e.closePath()};function D({text:e="",fontSize:t=24,fontFamily:i="Google Sans",fontWeight:a="400",fontStyle:l="normal",lineHeight:n=1.2,letterSpacing:r=0,maxWidth:s=300}){if("undefined"==typeof document){let i=.5*t,a=e.split("\n"),l=0;return a.forEach(e=>{let t=e.length*i;l+=Math.max(1,Math.ceil(t/s))}),{lines:a,width:s,height:Math.max(l*t*n,t),lineCount:l}}let o=document.createElement("canvas").getContext("2d");o.font=`${l} ${a} ${t}px "${i}", sans-serif`;let d=e.split("\n"),h=[],c=0;d.forEach(e=>{if(""===e.trim())return void h.push("");let t=e.split(" "),i="";for(let e of t){let t=i+(i?" ":"")+e;if(o.measureText(t).width+(t.length-1)*r>s&&""!==i){let t=o.measureText(i).width+(i.length-1)*r;c=Math.max(c,t),h.push(i),i=e}else i=t}if(i){let e=o.measureText(i).width+(i.length-1)*r;c=Math.max(c,e),h.push(i)}}),0===h.length&&h.push("");let x=Math.max(h.length*t*n,t);return{lines:h,width:Math.min(c,s),height:x,lineCount:h.length}}function A(e,t={}){let i={...e,...t},a=D({text:i.textContent||"",fontSize:i.fontSize||24,fontFamily:i.fontFamily||"Google Sans",fontWeight:i.fontWeight||"400",fontStyle:i.fontStyle||"normal",lineHeight:i.lineHeight||1.2,letterSpacing:i.letterSpacing||0,maxWidth:i.textMaxWidth||i.width||300});return{...t,height:a.height,width:i.textMaxWidth||i.width||300}}let W=c("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),R=c("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),G=c("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);function L({element:e,onFinish:a,canvasRef:n,zoom:r,panOffset:s}){let[o,d]=(0,i.useState)(e.textContent||""),h=(0,i.useRef)(null),{updateElement:c}=l(),x=(0,i.useRef)(!1);(0,i.useEffect)(()=>{h.current&&(h.current.focus(),h.current.select())},[]);let u=(0,i.useCallback)(()=>{if(x.current)return;x.current=!0;let t=o.trim()||"Text";if(t!==e.textContent){let i=D({text:t,fontSize:e.fontSize||24,fontFamily:e.fontFamily||"Google Sans",fontWeight:e.fontWeight||"400",fontStyle:e.fontStyle||"normal",lineHeight:e.lineHeight||1.2,letterSpacing:e.letterSpacing||0,maxWidth:e.textMaxWidth||e.width||300});c(e.id,{textContent:t,height:i.height,width:e.textMaxWidth||e.width||300})}a()},[o,e,c,a]),p=e.x*r+s.x,y=e.y*r+s.y,f=e.textMaxWidth||e.width||300,g={position:"absolute",left:p,top:y,width:Math.max(f*r,150),minHeight:Math.max(D({text:o||"Text",fontSize:e.fontSize||24,fontFamily:e.fontFamily||"Google Sans",fontWeight:e.fontWeight||"400",fontStyle:e.fontStyle||"normal",lineHeight:e.lineHeight||1.2,letterSpacing:e.letterSpacing||0,maxWidth:f}).height*r,(e.fontSize||24)*r*2),fontSize:(e.fontSize||24)*r,fontFamily:`"${e.fontFamily||"Google Sans"}", sans-serif`,fontWeight:e.fontWeight||"400",fontStyle:e.fontStyle||"normal",color:e.textColor||"#000000",textAlign:e.textAlign||"left",lineHeight:e.lineHeight||1.2,letterSpacing:(e.letterSpacing||0)*r,background:"rgba(255, 255, 255, 0.95)",border:"2px solid #007acc",borderRadius:"4px",padding:"4px 6px",outline:"none",resize:"none",overflow:"hidden",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",boxSizing:"border-box"};return(0,t.jsx)("textarea",{ref:h,value:o,onChange:e=>d(e.target.value),onBlur:u,onKeyDown:e=>{"Escape"===e.key?(x.current=!0,a()):"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&u(),e.stopPropagation()},style:g,placeholder:"Enter text..."})}function V(){let e=(0,i.useRef)(null),a=(0,i.useRef)(null),{aspectRatio:n,baseWidth:r,tool:s,setTool:o,strokeColor:d,fillColor:h,strokeWidth:c,isRatioLocked:x,gridVisible:u,setGridVisible:p,backgroundColor:y,gridColor:f,guideColor:g,rulersVisible:m,elements:v,setElements:k,addElement:w,layers:b,activeLayerId:j,updateElement:M,batchUpdateElements:S,deleteSelectedElements:_,duplicateSelectedElements:C,bringToFront:z,sendToBack:N,bringForward:$,sendBackward:I,groupSelectedElements:T,ungroupSelectedElements:E,copySelectedElements:V,cutSelectedElements:X,pasteElements:Z,selectedElementIds:Q,setSelectedElementIds:ee,zoom:et,setZoom:ei,panOffset:ea,setPanOffset:el,guides:en,setGuides:er,guidesLocked:es,undo:eo,redo:ed,spikes:eh,strokeStyle:ec,lineCap:ex,arrowType:eu,snapToGrid:ep,snapToScale:ey,snapToGuides:ef,cornerRadius:eg,textContent:em,fontFamily:ev,fontSize:ek,fontWeight:ew,fontStyle:eb,textDecoration:ej,textAlign:eM,lineHeight:eS,letterSpacing:e_,textColor:eC,textVisible:ez,textMaxWidth:eN}=l(),[e$,eI]=(0,i.useState)(!1),[eP,eB]=(0,i.useState)(null),[eT,eE]=(0,i.useState)(null),[eD,eA]=(0,i.useState)(null),[eW,eR]=(0,i.useState)(0),[eG,eL]=(0,i.useState)(null),eV=n?r/n.w*n.h:r/1.5,eH=t=>{let i=e.current.getBoundingClientRect();return{x:t.clientX-i.left,y:t.clientY-i.top}},eF=(0,i.useCallback)((e,t)=>({x:(e-ea.x)/et,y:(t-ea.y)/et}),[et,ea]);(0,i.useEffect)(()=>{if(!e.current)return;let t=e.current.parentElement;if(el({x:(t.clientWidth-r*et)/2+50,y:(t.clientHeight-eV*et)/2}),"undefined"!=typeof document&&document.fonts){let e=()=>{eR(e=>e+1)};return document.fonts.addEventListener("loadingdone",e),()=>document.fonts.removeEventListener("loadingdone",e)}},[]),(0,i.useEffect)(()=>{let t=e.current;if(!t)return;let i=t.getContext("2d");if(t.width=t.parentElement.clientWidth,t.height=t.parentElement.clientHeight,i.clearRect(0,0,t.width,t.height),i.save(),i.translate(ea.x,ea.y),i.scale(et,et),i.shadowColor="rgba(0,0,0,0.5)",i.shadowBlur=50,"transparent"===y)for(let e=0;e<eV;e+=10)for(let t=0;t<r;t+=10){i.fillStyle=(Math.floor(t/10)+Math.floor(e/10))%2==0?"#18191b":"#111113";let a=Math.min(10,r-t),l=Math.min(10,eV-e);i.fillRect(t,e,a,l)}else i.fillStyle=y,i.fillRect(0,0,r,eV);if(i.shadowBlur=0,i.beginPath(),i.rect(0,0,r,eV),i.clip(),u){i.beginPath(),i.strokeStyle=f,i.lineWidth=1/et;for(let e=0;e<=r;e+=40)i.moveTo(e,0),i.lineTo(e,eV);for(let e=0;e<=eV;e+=40)i.moveTo(0,e),i.lineTo(r,e);i.stroke()}a.current||(a.current=document.createElement("canvas"));let l=a.current;(l.width!==r||l.height!==eV)&&(l.width=r,l.height=eV);let n=l.getContext("2d");n.clearRect(0,0,r,eV),[...b].reverse().forEach(e=>{e.visible&&v.filter(t=>t.layerId===e.id).forEach(t=>{B(n,t,void 0!==e.opacity?e.opacity:1)})}),eP&&B(n,eP),i.drawImage(l,0,0);let s=v.filter(e=>Q.includes(e.id));if(1===s.length)U(i,s[0],et);else if(s.length>1){let e=Y(s);e&&O(i,{...e,rotation:0},et)}m&&en.forEach(e=>{i.beginPath(),i.strokeStyle=g,i.lineWidth=1/et,"v"===e.type?(i.moveTo(e.pos,-1e4),i.lineTo(e.pos,1e4)):(i.moveTo(-1e4,e.pos),i.lineTo(1e4,e.pos)),i.stroke()}),eT&&(i.setLineDash([5,5]),i.strokeStyle="#007acc",i.lineWidth=1/et,i.strokeRect(eT.x,eT.y,eT.w,eT.h)),i.restore()},[v,eP,b,r,eV,Q,u,et,ea,eT,en,eG,y,f,g,m,eW]),(0,i.useEffect)(()=>{let e=e=>{if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&((e.ctrlKey||e.metaKey)&&("z"===e.key&&(e.preventDefault(),eo()),"y"===e.key&&(e.preventDefault(),ed()),"c"===e.key&&(e.preventDefault(),V()),"x"===e.key&&(e.preventDefault(),X()),"v"===e.key&&(e.preventDefault(),Z()),"g"!==e.key||e.shiftKey||(e.preventDefault(),T()),"g"===e.key&&e.shiftKey&&(e.preventDefault(),E()),"ArrowUp"===e.key&&e.shiftKey&&(e.preventDefault(),z()),"ArrowDown"===e.key&&e.shiftKey&&(e.preventDefault(),N()),"ArrowUp"!==e.key||e.shiftKey||(e.preventDefault(),$()),"ArrowDown"!==e.key||e.shiftKey||(e.preventDefault(),I())),("Delete"===e.key||"Backspace"===e.key)&&_(),(e.ctrlKey||e.metaKey)&&"d"===e.key&&(e.preventDefault(),C()),("v"===e.key||"V"===e.key)&&o("select"),("p"===e.key||"P"===e.key)&&o("pencil"),("e"===e.key||"E"===e.key)&&o("eraser"),("r"===e.key||"R"===e.key)&&o("rect"),("t"===e.key||"T"===e.key)&&(e.preventDefault(),o("text")),"g"!==e.key&&"G"!==e.key||e.ctrlKey||e.metaKey||(e.preventDefault(),p(e=>!e)),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&Q.length>0)){e.preventDefault();let t=e.shiftKey?10:1,i="ArrowLeft"===e.key?-t:"ArrowRight"===e.key?t:0,a="ArrowUp"===e.key?-t:"ArrowDown"===e.key?t:0,l=Q.map(e=>v.find(t=>t.id===e)).filter(e=>{let t=b.find(t=>t.id===e?.layerId);return t&&!t.locked});l.length>0&&l.forEach(e=>{M(e.id,{x:e.x+i,y:e.y+a},!1)})}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[eo,ed,_,C,V,X,Z,o,p,Q,v,b,M]);let eq=()=>{if(eG){if(["move","rotate","resize","groupRotate","groupResize"].includes(eG.type)){if(ep&&u||ef){let e=e=>{if(ep&&u){let t=40*Math.round(e/40);if(ef&&en.length>0){let i=null,a=1/0;if(en.forEach(t=>{let l=Math.abs(t.pos-e);l<a&&l<10&&(a=l,i=t.pos)}),null!==i&&Math.abs(i-e)<Math.abs(t-e))return i}return t}if(ef&&en.length>0){let t=null,i=1/0;if(en.forEach(a=>{let l=Math.abs(a.pos-e);l<i&&l<10&&(i=l,t=a.pos)}),null!==t)return t}return e};"move"===eG.type?(eG.initialElements||[v.find(e=>e.id===eG.elId)]).forEach(t=>{let i=v.find(e=>e.id===t.id);i&&M(i.id,{x:e(i.x),y:e(i.y)},!1)}):("groupRotate"===eG.type||"groupResize"===eG.type)&&eG.initialElements.forEach(t=>{let i=v.find(e=>e.id===t.id);i&&M(i.id,{x:e(i.x),y:e(i.y)},!1)})}eG.elId?M(eG.elId,{},!0):eG.initialElements&&eG.initialElements.forEach(e=>M(e.id,{},!0))}else eG.type;eL(null),eE(null)}if(e$&&"eraser"===s&&eP&&eP.points.length>0){eI(!1);let e=eP.points.map(e=>e.x),t=eP.points.map(e=>e.y),i={x:Math.min(...e),y:Math.min(...t),w:Math.max(...e)-Math.min(...e),h:Math.max(...t)-Math.min(...t)};S(v.map(e=>{let t=b.find(t=>t.id===e.layerId);if(!t||t.locked||!t.visible)return e;let a=Y([e]);if(!a)return e;if(!(a.x>i.x+i.w||a.x+a.width<i.x||a.y>i.y+i.h||a.y+a.height<i.y)){let t=e.x+e.width/2,i=e.y+e.height/2,a=-(e.rotation||0)*Math.PI/180,l=Math.cos(a),n=Math.sin(a),r=eP.points.map(a=>({x:((a.x-t)*l-(a.y-i)*n+e.width/2)/e.width,y:((a.x-t)*n+(a.y-i)*l+e.height/2)/e.height}));return{...e,eraserPaths:[...e.eraserPaths||[],{points:r,strokeWidth:eP.strokeWidth||20,baseWidth:e.width,baseHeight:e.height}]}}return e}),!0),eB(null);return}if(e$&&"eraser"===s){eI(!1),eB(null);return}if(eP){let e={...eP};if(e.points&&e.points.length>1){let t=e.points.map(e=>e.x),i=e.points.map(e=>e.y),a=Math.min(...t),l=Math.min(...i),n=Math.max(Math.max(...t)-a,1),r=Math.max(Math.max(...i)-l,1);e.x=a,e.y=l,e.width=n,e.height=r,e.points=e.points.map(e=>({x:(e.x-a)/n,y:(e.y-l)/r})),e.isNormalized=!0}else 2>Math.abs(e.width)&&2>Math.abs(e.height)&&(e=null);if(e){let t=w(e);t&&ee([t.id])}}eI(!1),eB(null)},eK=(e,t)=>{if(es)return;let i=eH(t),a=eF(i.x,i.y),l="v"===e?a.x:a.y;ep&&u&&(l=40*Math.round(l/40)),er([...en,{type:e,pos:l}]),eL({type:"dragGuide",index:en.length,gType:e})};return(0,t.jsxs)("div",{className:P.default.container,onWheel:e=>{e.ctrlKey?(e.preventDefault(),ei(t=>Math.min(Math.max(t*(e.deltaY>0?.9:1.1),.1),10))):el(t=>({x:t.x-e.deltaX,y:t.y-e.deltaY}))},onContextMenu:e=>{Q.length>0&&e.preventDefault()},children:[m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:P.default.rulerX,onMouseDown:e=>eK("h",e),children:(0,t.jsx)("div",{style:{transform:`translateX(${ea.x}px) scaleX(${et})`,transformOrigin:"left"},children:Array.from({length:100}).map((e,i)=>(0,t.jsx)("span",{style:{left:100*i},children:100*i},i))})}),(0,t.jsx)("div",{className:P.default.rulerY,onMouseDown:e=>eK("v",e),children:(0,t.jsx)("div",{style:{transform:`translateY(${ea.y}px) scaleY(${et})`,transformOrigin:"top"},children:Array.from({length:100}).map((e,i)=>(0,t.jsx)("span",{style:{top:100*i},children:100*i},i))})})]}),(0,t.jsx)("div",{className:P.default.canvasWrapper,children:(0,t.jsx)("canvas",{ref:e,onMouseDown:e=>{let t=eH(e),i=eF(t.x,t.y);if("pan"===s||1===e.button)return void eL({type:"pan",startPos:t,initialPan:ea});if(m&&!es){let e=en.findIndex(e=>Math.abs(e.pos-("v"===e.type?i.x:i.y))<6/et);if(-1!==e)return void eL({type:"dragGuide",index:e,gType:en[e].type})}if(Q.length>0){let e=v.filter(e=>Q.includes(e.id));if(e.length>1){let t=Y(e);if(t){let a=J(t);if(Math.hypot(i.x-a.x,i.y-a.y)<10/et){let t=e.map(e=>({...e})),a=Y(t),l={x:a.x+a.width/2,y:a.y+a.height/2},n=Math.atan2(i.y-l.y,i.x-l.x);eL({type:"groupRotate",startPos:i,initialElements:t,groupRotation:0,bboxCenter:l,startAngle:n,initialBbox:a});return}let l={tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},bl:{x:t.x,y:t.y+t.height},br:{x:t.x+t.width,y:t.y+t.height}};for(let t in l){let a=l[t];if(Math.hypot(i.x-a.x,i.y-a.y)<8/et){let a=e.map(e=>({...e})),l=Y(a);eL({type:"groupResize",handle:t,startPos:i,initialElements:a,initialBbox:l});return}}}}else{let t=e[0],a=q(t);if(Math.hypot(i.x-a.x,i.y-a.y)<10/et)return void eL({type:"rotate",elId:t.id,startPos:i});let l=b.find(e=>e.id===t.layerId);if(l&&!l.locked){let e=K(t);for(let a in e){let l=e[a];if(Math.hypot(i.x-l.x,i.y-l.y)<8/et)return void eL({type:"resize",elId:t.id,handle:a,startPos:i,initial:{x:t.x,y:t.y,w:t.width,h:t.height,textMaxWidth:t.textMaxWidth}})}}}}if("select"===s){let t=[...v].reverse().find(e=>{let t=b.find(t=>t.id===e.layerId);return t&&!t.locked&&t.visible&&F(i.x,i.y,e)}),a=v.filter(e=>Q.includes(e.id));a.length;let l=!1;if(Q.length>0&&!t){let e=Y(a);if(e){let t=5/et;l=i.x>=e.x-t&&i.x<=e.x+e.width+t&&i.y>=e.y-t&&i.y<=e.y+e.height+t}}if(t||l){if(t){let a=t.groupIds||(t.groupId?[t.groupId]:[]),l=a.length>0?a[a.length-1]:null,n=l?v.filter(e=>(e.groupIds||(e.groupId?[e.groupId]:[])).includes(l)).map(e=>e.id):[t.id],r=n.every(e=>Q.includes(e));if(r?e.shiftKey&&ee(e=>e.filter(e=>!n.includes(e))):e.shiftKey?ee(e=>[...new Set([...e,...n])]):ee(n),"text"===t.type&&2===e.detail)return void eA(t);let s=r?e.shiftKey?Q.filter(e=>!n.includes(e)):Q:e.shiftKey?[...new Set([...Q,...n])]:n;eL({type:"move",startPos:i,initialElements:v.filter(e=>s.includes(e.id)).map(e=>({...e}))})}else l&&eL({type:"move",startPos:i,initialElements:a.map(e=>({...e}))});return}e.shiftKey||ee([]),eL({type:"marquee",startPos:i});return}if("remover"===s){eI(!0);let e=[];v.forEach(t=>{let a=b.find(e=>e.id===t.layerId);a&&!a.locked&&a.visible&&H(t,i,15)&&e.push(t.id)}),e.length>0&&k(t=>t.filter(t=>!e.includes(t.id)));return}let a=b.find(e=>e.id===j);if(a&&(a.locked||!a.visible))return void alert("Cannot draw on a locked or hidden layer.");if(ee([]),eI(!0),"text"===s){let e=function({x:e,y:t,text:i="Text",fontSize:a=24,fontFamily:l="Google Sans",fontWeight:n="400",fontStyle:r="normal",textDecoration:s="none",textAlign:o="left",lineHeight:d=1.2,letterSpacing:h=0,textColor:c="#000000",maxWidth:x=300}){let u=D({text:i,fontSize:a,fontFamily:l,fontWeight:n,fontStyle:r,lineHeight:d,letterSpacing:h,maxWidth:x});return{type:"text",x:e,y:t,width:x,height:u.height,textContent:i,fontFamily:l,fontSize:a,fontWeight:n,fontStyle:r,textDecoration:s,textAlign:o,lineHeight:d,letterSpacing:h,textColor:c,textVisible:!0,textMaxWidth:x,strokeColor:"transparent",fillColor:"transparent"}}({x:i.x,y:i.y,text:"Edit text in the property panel",fontSize:ek,fontFamily:ev,fontWeight:ew,fontStyle:eb,textDecoration:ej,textAlign:eM,lineHeight:eS,letterSpacing:e_,textColor:eC,maxWidth:eN}),t=w(e);t&&(ee([t.id]),o("select")),eI(!1),eB(null);return}eB({type:"eraser"===s?"pencil":s,x:i.x,y:i.y,width:0,height:0,strokeColor:"eraser"===s?"#000000":d,fillColor:"eraser"===s?"transparent":h,strokeWidth:c,blendMode:"eraser"===s?"destination-out":"source-over",spikes:eh,strokeStyle:ec,lineCap:ex,arrowType:eu,cornerRadius:eg,points:"pencil"===s||"eraser"===s?[{x:i.x,y:i.y}]:[]})},onMouseMove:t=>{let i=eH(t),a=eF(i.x,i.y);if(eG){if("pan"===eG.type)el({x:eG.initialPan.x+(i.x-eG.startPos.x),y:eG.initialPan.y+(i.y-eG.startPos.y)});else if("move"===eG.type){let e=a.x-eG.startPos.x,t=a.y-eG.startPos.y,i=e=>{if(ep&&u)return 40*Math.round(e/40);if(ef&&en.length>0){let t=null,i=1/0;if(en.forEach(a=>{let l=Math.abs(a.pos-e);l<i&&l<10&&(i=l,t=a.pos)}),null!==t)return t}return e};eG.initialElements.forEach(a=>{M(a.id,{x:i(a.x+e),y:i(a.y+t)},!1)})}else if("resize"===eG.type){let e=a.x-eG.startPos.x,t=a.y-eG.startPos.y,{handle:i,initial:l}=eG,n=v.find(e=>e.id===eG.elId),r=l.w+("br"===i||"tr"===i?e:-e),s=l.h+("br"===i||"bl"===i?t:-t);if(x&&0!==l.w&&0!==l.h){l.w,l.h;let e=Math.max(Math.abs(r/l.w),Math.abs(s/l.h));r=l.w*e,s=l.h*e}ey&&(r=10*Math.round(r/10),s=10*Math.round(s/10));let o=l.x,d=l.y;"tl"===i?(o=l.x+l.w-r,d=l.y+l.h-s):"tr"===i?(o=l.x,d=l.y+l.h-s):"bl"===i?(o=l.x+l.w-r,d=l.y):"br"===i&&(o=l.x,d=l.y);let h=e=>{if(ep&&u)return 40*Math.round(e/40);if(ef&&en.length>0){let t=null,i=1/0;if(en.forEach(a=>{let l=Math.abs(a.pos-e);l<i&&l<10&&(i=l,t=a.pos)}),null!==t)return t}return e},c={x:h(o),y:h(d),width:r,height:s};if(n&&"text"===n.type&&l.textMaxWidth){let e=r/l.w,t=Math.max(50,Math.min(800,Math.round(l.textMaxWidth*e))),i=A(n,{textMaxWidth:t});c.textMaxWidth=i.textMaxWidth,c.height=i.height,c.width=t}M(eG.elId,c,!1)}else if("rotate"===eG.type){let e=v.find(e=>e.id===eG.elId),t=e.x+e.width/2,i=e.y+e.height/2,l=Math.atan2(a.y-i,a.x-t);M(e.id,{rotation:180*l/Math.PI+90},!1)}else if("groupRotate"===eG.type){let{bboxCenter:e,initialElements:t,startAngle:i}=eG,l=Math.atan2(a.y-e.y,a.x-e.x)-i,n=180*l/Math.PI;eG.groupRotation=n;let r=Math.cos(l),s=Math.sin(l);t.forEach(t=>{let i=t.x+t.width/2,a=t.y+t.height/2,l=i-e.x,o=a-e.y,d=e.x+(l*r-o*s)-t.width/2,h=e.y+(l*s+o*r)-t.height/2,c=(t.rotation||0)+n;M(t.id,{x:d,y:h,rotation:c},!1)})}else if("groupResize"===eG.type){let{handle:e,startPos:t,initialElements:i,initialBbox:l}=eG,n=a.x-t.x,r=a.y-t.y,s=1,o=1;if("br"===e?(s=(l.width+n)/l.width,o=(l.height+r)/l.height):"bl"===e?(s=(l.width-n)/l.width,o=(l.height+r)/l.height):"tr"===e?(s=(l.width+n)/l.width,o=(l.height-r)/l.height):"tl"===e&&(s=(l.width-n)/l.width,o=(l.height-r)/l.height),x){let e=Math.max(s,o);s=e,o=e}s=Math.max(.01,s),o=Math.max(.01,o);let d=l.x,h=l.y;"tl"===e?(d=l.x+l.width-l.width*s,h=l.y+l.height-l.height*o):"tr"===e?(d=l.x,h=l.y+l.height-l.height*o):"bl"===e?(d=l.x+l.width-l.width*s,h=l.y):"br"===e&&(d=l.x,h=l.y),i.forEach(e=>{let t=e.x-l.x,i=e.y-l.y,a=d+t*s,n=h+i*o,r=e.width*s,c=e.height*o;ey&&(r=10*Math.round(r/10),c=10*Math.round(c/10));let x={x:a,y:n,width:r,height:c};if("text"===e.type&&e.textMaxWidth){let t=Math.max(50,Math.min(800,Math.round(e.textMaxWidth*s))),i=A(e,{textMaxWidth:t});x.textMaxWidth=i.textMaxWidth,x.height=i.height,x.width=t}M(e.id,x,!1)})}else if("marquee"===eG.type){let e=Math.min(eG.startPos.x,a.x),t=Math.min(eG.startPos.y,a.y),i=Math.abs(a.x-eG.startPos.x),l=Math.abs(a.y-eG.startPos.y);eE({x:e,y:t,w:i,h:l}),ee(v.filter(a=>{let n=a.x+(a.width||0)/2,r=a.y+(a.height||0)/2;if(!(n>=e&&n<=e+i&&r>=t&&r<=t+l))return!1;let s=b.find(e=>e.id===a.layerId);return s&&!s.locked&&s.visible}).map(e=>e.id))}else if("dragGuide"===eG.type){let e=[...en],t="v"===eG.gType?a.x:a.y;ep&&u&&(t=40*Math.round(t/40)),e[eG.index].pos=t,er(e)}}let l="default",n=v.filter(e=>Q.includes(e.id)),r=n.length>1;if(eG?.type==="rotate"||eG?.type==="groupRotate")l="grabbing";else if(Q.length>0)if(r){let e=Y(n);if(e){let t=J(e);if(Math.hypot(a.x-t.x,a.y-t.y)<10/et)l="grab";else{let t={tl:{x:e.x,y:e.y},tr:{x:e.x+e.width,y:e.y},bl:{x:e.x,y:e.y+e.height},br:{x:e.x+e.width,y:e.y+e.height}};Math.hypot(a.x-t.tl.x,a.y-t.tl.y)<8/et?l="nwse-resize":Math.hypot(a.x-t.tr.x,a.y-t.tr.y)<8/et||Math.hypot(a.x-t.bl.x,a.y-t.bl.y)<8/et?l="nesw-resize":Math.hypot(a.x-t.br.x,a.y-t.br.y)<8/et&&(l="nwse-resize")}}}else{let e=n[0];if(e){let t=q(e);if(Math.hypot(a.x-t.x,a.y-t.y)<10/et)l="grab";else{let t=K(e);Math.hypot(a.x-t.tl.x,a.y-t.tl.y)<8/et?l="nwse-resize":Math.hypot(a.x-t.tr.x,a.y-t.tr.y)<8/et||Math.hypot(a.x-t.bl.x,a.y-t.bl.y)<8/et?l="nesw-resize":Math.hypot(a.x-t.br.x,a.y-t.br.y)<8/et&&(l="nwse-resize")}}}if("select"===s){if("default"===l){for(let e of Q){let t=v.find(t=>t.id===e);if(t&&F(a.x,a.y,t)){l="move";break}}if("default"===l&&r){let e=Y(n);e&&a.x>=e.x&&a.x<=e.x+e.width&&a.y>=e.y&&a.y<=e.y+e.height&&(l="move")}}if("default"===l&&m){let e=en.find(e=>Math.abs(e.pos-("v"===e.type?a.x:a.y))<6/et);e&&(l="v"===e.type?"col-resize":"row-resize")}}else if("default"===l)if(m){let e=en.find(e=>Math.abs(e.pos-("v"===e.type?a.x:a.y))<6/et);l=e?"v"===e.type?"col-resize":"row-resize":"crosshair"}else l="crosshair";if(e.current&&(e.current.style.cursor=l),e$&&"remover"===s){let e=[];v.forEach(t=>{let i=b.find(e=>e.id===t.layerId);i&&!i.locked&&i.visible&&H(t,a,15)&&e.push(t.id)}),e.length>0&&k(t=>t.filter(t=>!e.includes(t.id)))}if(e$&&eP)if("pencil"===s||"eraser"===s)eB(e=>({...e,points:[...e.points,a]}));else{let e=a.x-eP.x,t=a.y-eP.y;if(x){let i=Math.max(Math.abs(e),Math.abs(t));e=e<0?-i:i,t=t<0?-i:i}eB(i=>({...i,width:e,height:t}))}},onMouseUp:eq,onMouseLeave:eq})}),(0,t.jsxs)("div",{className:P.default.zoomControls,children:[(0,t.jsx)("button",{onClick:()=>ei(e=>Math.max(e-.1,.1)),className:P.default.zBtn,children:(0,t.jsx)(R,{size:16})}),(0,t.jsx)("button",{onClick:()=>{if(!e.current)return;let t=e.current.parentElement,i=t.clientWidth,a=t.clientHeight;ei(.8),el({x:(i-.8*r)/2,y:(a-.8*eV)/2})},className:P.default.zBtn,children:(0,t.jsx)(G,{size:16})}),(0,t.jsxs)("span",{style:{fontSize:"var(--font-label)",marginLeft:8},children:[Math.round(100*et),"%"]}),(0,t.jsx)("button",{onClick:()=>ei(e=>Math.min(e+.1,10)),className:P.default.zBtn,children:(0,t.jsx)(W,{size:16})})]}),eD&&(0,t.jsx)(L,{element:eD,onFinish:()=>eA(null),canvasRef:e,zoom:et,panOffset:ea})]})}let H=(e,t,i)=>{if("text"===e.type)return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height;if("pencil"===e.type)return!!e.points&&0!==e.points.length&&(e.isNormalized?e.points.some(a=>{let l=e.x+a.x*e.width,n=e.y+a.y*e.height;return Math.hypot(l-t.x,n-t.y)<i}):e.points.some(e=>Math.hypot(e.x-t.x,e.y-t.y)<i));let a=e.width<0?e.x+e.width:e.x,l=e.height<0?e.y+e.height:e.y,n=Math.abs(e.width),r=Math.abs(e.height),s=Math.max(a,Math.min(t.x,a+n)),o=Math.max(l,Math.min(t.y,l+r));return Math.hypot(t.x-s,t.y-o)<i},F=(e,t,i)=>{if("text"===i.type)return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height;if("pencil"===i.type)return!!i.points&&0!==i.points.length&&(i.isNormalized?i.points.some(a=>{let l=i.x+a.x*i.width,n=i.y+a.y*i.height;return 10>Math.abs(l-e)&&10>Math.abs(n-t)}):i.points.some(i=>10>Math.abs(i.x-e)&&10>Math.abs(i.y-t)));if(i.rotation){let a=i.x+i.width/2,l=i.y+i.height/2,n=-i.rotation*Math.PI/180,r=Math.cos(n),s=Math.sin(n),o=a+(e-a)*r-(t-l)*s,d=l+(e-a)*s+(t-l)*r,h=i.width<0?i.x+i.width:i.x,c=i.height<0?i.y+i.height:i.y;return o>=h&&o<=h+Math.abs(i.width)&&d>=c&&d<=c+Math.abs(i.height)}let a=i.width<0?i.x+i.width:i.x,l=i.height<0?i.y+i.height:i.y;return e>=a&&e<=a+Math.abs(i.width)&&t>=l&&t<=l+Math.abs(i.height)},q=e=>{let t=e.x+e.width/2,i=e.y+e.height/2,a=e.height/2+30,l=((e.rotation||0)-90)*(Math.PI/180);return{x:t+Math.cos(l)*a,y:i+Math.sin(l)*a}},K=e=>({tl:{x:e.x,y:e.y},tr:{x:e.x+e.width,y:e.y},bl:{x:e.x,y:e.y+e.height},br:{x:e.x+e.width,y:e.y+e.height}}),Y=e=>{if(0===e.length)return null;if(1===e.length){let t=e[0];if(t.rotation){let e=X(t),i=1/0,a=1/0,l=-1/0,n=-1/0;return e.forEach(e=>{i=Math.min(i,e.x),a=Math.min(a,e.y),l=Math.max(l,e.x),n=Math.max(n,e.y)}),{x:i,y:a,width:l-i,height:n-a,rotation:t.rotation||0}}return{x:t.x,y:t.y,width:t.width,height:t.height,rotation:t.rotation||0}}let t=1/0,i=1/0,a=-1/0,l=-1/0;return e.forEach(e=>{X(e).forEach(e=>{t=Math.min(t,e.x),i=Math.min(i,e.y),a=Math.max(a,e.x),l=Math.max(l,e.y)})}),{x:t,y:i,width:a-t,height:l-i,rotation:0}},X=e=>{let t=e.width<0?e.x+e.width:e.x,i=e.height<0?e.y+e.height:e.y,a=Math.abs(e.width),l=Math.abs(e.height),n=[{x:t,y:i},{x:t+a,y:i},{x:t,y:i+l},{x:t+a,y:i+l}];if(e.rotation){let r=t+a/2,s=i+l/2,o=e.rotation*Math.PI/180,d=Math.cos(o),h=Math.sin(o);return n.map(e=>{let t=e.x-r,i=e.y-s;return{x:r+t*d-i*h,y:s+t*h+i*d}})}return n},U=(e,t,i)=>{e.save();let a=t.x+t.width/2,l=t.y+t.height/2;t.rotation&&(e.translate(a,l),e.rotate(t.rotation*Math.PI/180),e.translate(-a,-l)),e.strokeStyle="#007acc",e.lineWidth=1/i,e.setLineDash([5,5]),e.strokeRect(t.x,t.y,t.width,t.height),e.setLineDash([]);let n=K(t);e.fillStyle="#ffffff";let r=8/i;for(let t in n){let i=n[t];e.fillRect(i.x-r/2,i.y-r/2,r,r),e.strokeRect(i.x-r/2,i.y-r/2,r,r)}let s=q(t);e.beginPath(),e.arc(s.x,s.y,6/i,0,2*Math.PI),e.fillStyle="#007acc",e.fill(),e.beginPath(),e.strokeStyle="#007acc",e.lineWidth=1/i,e.moveTo(a,l-Math.abs(t.height)/2),e.lineTo(s.x,s.y),e.stroke(),e.restore()},O=(e,t,i)=>{e.save();let a=t.x+t.width/2,l=t.y+t.height/2;t.rotation&&(e.translate(a,l),e.rotate(t.rotation*Math.PI/180),e.translate(-a,-l)),e.strokeStyle="#007acc",e.lineWidth=1/i,e.setLineDash([5,5]),e.strokeRect(t.x,t.y,t.width,t.height),e.setLineDash([]);let n={tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},bl:{x:t.x,y:t.y+t.height},br:{x:t.x+t.width,y:t.y+t.height}};e.fillStyle="#ffffff",e.strokeStyle="#007acc";let r=8/i;for(let t in n){let i=n[t];e.fillRect(i.x-r/2,i.y-r/2,r,r),e.strokeRect(i.x-r/2,i.y-r/2,r,r)}let s=J(t);e.beginPath(),e.arc(s.x,s.y,6/i,0,2*Math.PI),e.fillStyle="#007acc",e.fill(),e.beginPath(),e.strokeStyle="#007acc",e.lineWidth=1/i,e.moveTo(a,l-Math.abs(t.height)/2),e.lineTo(s.x,s.y),e.stroke(),e.restore()},J=e=>{let t=e.x+e.width/2,i=e.y+e.height/2,a=e.height/2+30,l=((e.rotation||0)-90)*(Math.PI/180);return{x:t+Math.cos(l)*a,y:i+Math.sin(l)*a}};var Z=e.i(51036);let Q=c("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ee=c("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),et=c("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),ei=c("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ea=c("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),el=c("align-start-vertical",[["rect",{width:"9",height:"6",x:"6",y:"14",rx:"2",key:"lpm2y7"}],["rect",{width:"16",height:"6",x:"6",y:"4",rx:"2",key:"rdj6ps"}],["path",{d:"M2 2v20",key:"1ivd8o"}]]),en=c("align-end-vertical",[["rect",{width:"16",height:"6",x:"2",y:"4",rx:"2",key:"10wcwx"}],["rect",{width:"9",height:"6",x:"9",y:"14",rx:"2",key:"4p5bwg"}],["path",{d:"M22 22V2",key:"12ipfv"}]]),er=c("align-start-horizontal",[["rect",{width:"6",height:"16",x:"4",y:"6",rx:"2",key:"1n4dg1"}],["rect",{width:"6",height:"9",x:"14",y:"6",rx:"2",key:"17khns"}],["path",{d:"M22 2H2",key:"fhrpnj"}]]),es=c("align-end-horizontal",[["rect",{width:"6",height:"16",x:"4",y:"2",rx:"2",key:"z5wdxg"}],["rect",{width:"6",height:"9",x:"14",y:"9",rx:"2",key:"um7a8w"}],["path",{d:"M22 22H2",key:"19qnx5"}]]),eo=c("align-horizontal-justify-center",[["rect",{width:"6",height:"14",x:"2",y:"5",rx:"2",key:"dy24zr"}],["rect",{width:"6",height:"10",x:"16",y:"7",rx:"2",key:"13zkjt"}],["path",{d:"M12 2v20",key:"t6zp3m"}]]),ed=c("align-vertical-justify-center",[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),eh=c("align-vertical-space-between",[["rect",{width:"14",height:"6",x:"5",y:"15",rx:"2",key:"1w91an"}],["rect",{width:"10",height:"6",x:"7",y:"3",rx:"2",key:"17wqzy"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M2 3h20",key:"91anmk"}]]),ec=c("align-vertical-space-around",[["rect",{width:"10",height:"6",x:"7",y:"9",rx:"2",key:"b1zbii"}],["path",{d:"M22 20H2",key:"1p1f7z"}],["path",{d:"M22 4H2",key:"1b7qnq"}]]),ex=c("align-horizontal-space-between",[["rect",{width:"6",height:"14",x:"3",y:"5",rx:"2",key:"j77dae"}],["rect",{width:"6",height:"10",x:"15",y:"7",rx:"2",key:"bq30hj"}],["path",{d:"M3 2v20",key:"1d2pfg"}],["path",{d:"M21 2v20",key:"p059bm"}]]),eu=c("align-horizontal-space-around",[["rect",{width:"6",height:"10",x:"9",y:"7",rx:"2",key:"yn7j0q"}],["path",{d:"M4 22V2",key:"tsjzd3"}],["path",{d:"M20 22V2",key:"1bnhr8"}]]),ep=c("align-vertical-distribute-center",[["path",{d:"M22 17h-3",key:"1lwga1"}],["path",{d:"M22 7h-5",key:"o2endc"}],["path",{d:"M5 17H2",key:"1gx9xc"}],["path",{d:"M7 7H2",key:"6bq26l"}],["rect",{x:"5",y:"14",width:"14",height:"6",rx:"2",key:"1qrzuf"}],["rect",{x:"7",y:"4",width:"10",height:"6",rx:"2",key:"we8e9z"}]]),ey=c("align-horizontal-distribute-center",[["rect",{width:"6",height:"14",x:"4",y:"5",rx:"2",key:"1wwnby"}],["rect",{width:"6",height:"10",x:"14",y:"7",rx:"2",key:"1fe6j6"}],["path",{d:"M17 22v-5",key:"4b6g73"}],["path",{d:"M17 7V2",key:"hnrr36"}],["path",{d:"M7 22v-3",key:"1r4jpn"}],["path",{d:"M7 5V2",key:"liy1u9"}]]),ef=c("paint-bucket",[["path",{d:"M11 7 6 2",key:"1jwth8"}],["path",{d:"M18.992 12H2.041",key:"xw1gg"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]]),eg=c("line-squiggle",[["path",{d:"M7 3.5c5-2 7 2.5 3 4C1.5 10 2 15 5 16c5 2 9-10 14-7s.5 13.5-4 12c-5-2.5.5-11 6-2",key:"1lrphd"}]]),em=c("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ev=c("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ek=c("bring-to-front",[["rect",{x:"8",y:"8",width:"8",height:"8",rx:"2",key:"yj20xf"}],["path",{d:"M4 10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2",key:"1ltk23"}],["path",{d:"M14 20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2",key:"1q24h9"}]]),ew=c("send-to-back",[["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}],["path",{d:"M7 14v1a2 2 0 0 0 2 2h1",key:"pao6x6"}],["path",{d:"M14 7h1a2 2 0 0 1 2 2v1",key:"19tdru"}]]),eb=c("group",[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]]),ej=c("ungroup",[["rect",{width:"8",height:"6",x:"5",y:"4",rx:"1",key:"nzclkv"}],["rect",{width:"8",height:"6",x:"11",y:"14",rx:"1",key:"4tytwb"}]]),eM=c("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),eS=c("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),e_=c("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),eC=c("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]),ez=c("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),eN=c("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]),e$=c("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);function eI(){let{selectedElementIds:e,elements:a,updateElement:n,textContent:r,setTextContent:s,fontFamily:o,setFontFamily:d,fontSize:h,setFontSize:c,fontWeight:x,setFontWeight:u,fontStyle:p,setFontStyle:y,textDecoration:f,setTextDecoration:g,textAlign:m,setTextAlign:v,lineHeight:k,setLineHeight:w,letterSpacing:b,setLetterSpacing:j,textColor:M,setTextColor:S,textVisible:_,setTextVisible:C,textMaxWidth:z,setTextMaxWidth:N}=l(),[$,I]=(0,i.useState)(!1),[P,B]=(0,i.useState)(""),T=1===e.length?a.find(t=>t.id===e[0]&&"text"===t.type):null;(0,i.useEffect)(()=>{T&&(s(T.textContent||"Text"),d(T.fontFamily||"Google Sans"),c(T.fontSize||24),u(T.fontWeight||"400"),y(T.fontStyle||"normal"),g(T.textDecoration||"none"),v(T.textAlign||"left"),w(T.lineHeight||1.2),j(T.letterSpacing||0),S(T.textColor||"#000000"),C(!1!==T.textVisible),N(T.textMaxWidth||300))},[T?.id]);let E=async(e,t)=>{let i={textContent:s,fontFamily:d,fontSize:c,fontWeight:u,fontStyle:y,textDecoration:g,textAlign:v,lineHeight:w,letterSpacing:j,textColor:S,textVisible:C,textMaxWidth:N};if(i[e]&&i[e](t),T){let i={[e]:t};if(["fontSize","lineHeight","textContent","textMaxWidth","fontFamily","fontWeight","fontStyle","letterSpacing"].includes(e)){if("fontFamily"===e||"fontWeight"===e||"fontStyle"===e){let i="fontWeight"===e?t:R("fontWeight","400"),a="fontStyle"===e?t:R("fontStyle","normal"),l="fontFamily"===e?t:R("fontFamily","Google Sans"),n=R("fontSize",24);if("undefined"!=typeof document&&document.fonts&&document.fonts.load)try{await document.fonts.load(`${a} ${i} ${n}px "${l}"`)}catch(e){console.warn("Font load failed",e)}}i=A(T,i)}n(T.id,i)}},D=()=>{T&&P!==T.textContent&&E("textContent",P.trim()||"Text"),I(!1)},W=e=>{let t=T?.textDecoration||f,i=t;t.includes(e)?(i=t.replace(e,"").replace(/\s+/g," ").trim())||(i="none"):i="none"===t?e:`${t} ${e}`,E("textDecoration",i)},R=(e,t)=>T&&void 0!==T[e]?T[e]:({fontWeight:x,fontStyle:p,textDecoration:f,textAlign:m,textVisible:_,fontFamily:o,fontSize:h,lineHeight:k,letterSpacing:b,textColor:M,textMaxWidth:z,textContent:r})[e]??t,G=R("fontWeight","400"),L=R("fontStyle","normal"),V=R("textDecoration","none"),H=R("textAlign","left"),F=!1!==R("textVisible",!0);return(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsxs)("div",{className:Z.default.sectionHeader,style:{justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("span",{children:"Text Properties"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:R("textColor","#000000"),onChange:e=>E("textColor",e.target.value),className:Z.default.colorInput,style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{onClick:()=>E("textVisible",!F),className:`${Z.default.iconBtn} ${F?Z.default.active:""}`,title:F?"Hide Text":"Show Text",children:F?(0,t.jsx)(ei,{size:16}):(0,t.jsx)(ea,{size:16})})]})]}),(0,t.jsx)("div",{className:Z.default.row,children:$?(0,t.jsx)("textarea",{value:P,onChange:e=>B(e.target.value),onBlur:D,onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&D(),"Escape"===e.key&&I(!1)},className:Z.default.textarea,placeholder:"Enter text...",autoFocus:!0,rows:3}):(0,t.jsxs)("button",{onClick:()=>{T&&(B(T.textContent||""),I(!0))},className:Z.default.textButton,title:"Click to edit text",children:[R("textContent","Text").substring(0,30),R("textContent","Text").length>30?"...":""]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("select",{value:R("fontFamily","Google Sans"),onChange:e=>E("fontFamily",e.target.value),className:Z.default.select,children:[(0,t.jsx)("option",{value:"Google Sans",children:"Sans (Google Sans)"}),(0,t.jsx)("option",{value:"Lora",children:"Serif (Lora)"}),(0,t.jsx)("option",{value:"JetBrains Mono",children:"Monospace (JetBrains Mono)"}),(0,t.jsx)("option",{value:"Caveat",children:"Handwriting (Caveat)"})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Size: ",R("fontSize",24),"px"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"12",max:"64",step:"1",value:R("fontSize",24),onChange:e=>E("fontSize",parseInt(e.target.value)||24)})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Weight:",(()=>{let e=R("fontWeight","400");switch(e){case"400":return" Regular";case"500":return" Medium";case"600":return" Semi Bold";case"700":return" Bold";default:return e}})()]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"400",max:"700",step:"100",value:R("fontWeight","400"),onChange:e=>E("fontWeight",e.target.value)})]})}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{className:Z.default.buttonGroup,children:[(0,t.jsx)("button",{onClick:()=>{E("fontWeight",["700","bold"].includes(T?.fontWeight||x)?"400":"700")},className:`${Z.default.iconButton} ${["700","bold"].includes(G)?Z.default.active:""}`,title:"Bold",children:(0,t.jsx)(eM,{size:14})}),(0,t.jsx)("button",{onClick:()=>{E("fontStyle","italic"===(T?.fontStyle||p)?"normal":"italic")},className:`${Z.default.iconButton} ${"italic"===L?Z.default.active:""}`,title:"Italic",children:(0,t.jsx)(eS,{size:14})}),(0,t.jsx)("button",{onClick:()=>W("underline"),className:`${Z.default.iconButton} ${V.includes("underline")?Z.default.active:""}`,title:"Underline",children:(0,t.jsx)(e_,{size:14})}),(0,t.jsx)("button",{onClick:()=>W("line-through"),className:`${Z.default.iconButton} ${V.includes("line-through")?Z.default.active:""}`,title:"Strikethrough",children:(0,t.jsx)(eC,{size:14})})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{className:Z.default.buttonGroup,children:[(0,t.jsx)("button",{onClick:()=>E("textAlign","left"),className:`${Z.default.iconButton} ${"left"===H?Z.default.active:""}`,title:"Align Left",children:(0,t.jsx)(ez,{size:14})}),(0,t.jsx)("button",{onClick:()=>E("textAlign","center"),className:`${Z.default.iconButton} ${"center"===H?Z.default.active:""}`,title:"Align Center",children:(0,t.jsx)(eN,{size:14})}),(0,t.jsx)("button",{onClick:()=>E("textAlign","right"),className:`${Z.default.iconButton} ${"right"===H?Z.default.active:""}`,title:"Align Right",children:(0,t.jsx)(e$,{size:14})})]})})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Size:  ",R("lineHeight",1.2).toFixed(1),"rem"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0.5",max:"3",step:"0.1",value:R("lineHeight",1.2),onChange:e=>E("lineHeight",parseFloat(e.target.value)||1.2)})]})}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Size:  ",R("letterSpacing",0).toFixed(1),"px"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"-5",max:"20",step:"0.5",value:R("letterSpacing",0),onChange:e=>E("letterSpacing",parseFloat(e.target.value)||0)})]})})]}),(0,t.jsx)("div",{className:Z.default.row,children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Max Width: ",R("textMaxWidth",300),"px"]}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"50",max:"800",step:"10",value:R("textMaxWidth",300),onChange:e=>E("textMaxWidth",parseInt(e.target.value)||300)})]})})]})}function eP(){let{strokeColor:e,setStrokeColor:a,fillColor:n,setFillColor:r,strokeWidth:s,setStrokeWidth:o,opacity:d,setOpacity:h,blendMode:c,setBlendMode:x,backgroundColor:u,setBackgroundColor:y,gridColor:f,setGridColor:v,guideColor:k,setGuideColor:w,gridVisible:b,setGridVisible:j,rulersVisible:M,setRulersVisible:S,guides:_,setGuides:C,guidesLocked:z,setGuidesLocked:N,layers:$,setLayers:I,addLayer:P,deleteLayer:T,moveLayer:E,duplicateLayer:D,updateLayer:A,activeLayerId:W,setActiveLayerId:R,elements:G,updateElement:L,selectedElementIds:V,deleteSelectedElements:H,duplicateSelectedElements:F,bringToFront:q,sendToBack:K,bringForward:Y,sendBackward:X,groupSelectedElements:U,ungroupSelectedElements:O,aspectRatio:J,setAspectRatio:eM,baseWidth:eS,zoom:e_,tool:eC,spikes:ez,setSpikes:eN,strokeStyle:e$,setStrokeStyle:eP,lineCap:eB,setLineCap:eT,arrowType:eE,setArrowType:eD,snapToGrid:eA,setSnapToGrid:eW,snapToScale:eR,setSnapToScale:eG,snapToGuides:eL,setSnapToGuides:eV,cornerRadius:eH,setCornerRadius:eF}=l(),[eq,eK]=(0,i.useState)("png"),[eY,eX]=(0,i.useState)(1),eU=G.filter(e=>V.includes(e.id)),eO=1===eU.length,eJ=eU.length>1,eZ=eO?eU[0]:null,eQ=eJ&&eU.every(e=>{let t=e.groupIds||(e.groupId?[e.groupId]:[]),i=eU[0].groupIds||(eU[0].groupId?[eU[0].groupId]:[]),a=t[t.length-1],l=i[i.length-1];return a&&a===l}),e0=eZ&&eZ.strokeColor||e,e1=eZ&&eZ.fillColor||n,e2=eZ?eZ.strokeWidth??s:s,e4=eZ?eZ.opacity??d:d,e5=eZ?eZ.cornerRadius??eH:eH,e6=(e,t)=>{(eJ||eO)&&V.forEach(i=>L(i,{[e]:t})),(eO||0===V.length)&&("strokeColor"===e&&a(t),"fillColor"===e&&r(t),"strokeWidth"===e&&o(parseInt(t)),"opacity"===e&&h(parseFloat(t)),"strokeStyle"===e&&eP(t),"blendMode"===e&&x(t),"lineCap"===e&&eT(t),"arrowType"===e&&eD(t),"spikes"===e&&eN(parseInt(t)),"cornerRadius"===e&&eF(parseInt(t)))},e8=e=>{if(V.length<1)return;let t=Math.min(...eU.map(e=>e.x)),i=Math.max(...eU.map(e=>e.x+(e.width||0))),a=Math.min(...eU.map(e=>e.y)),l=Math.max(...eU.map(e=>e.y+(e.height||0)));V.forEach(n=>{let r=G.find(e=>e.id===n);"left"===e&&L(n,{x:t}),"right"===e&&L(n,{x:i-(r.width||0)}),"top"===e&&L(n,{y:a}),"bottom"===e&&L(n,{y:l-(r.height||0)}),"centerX"===e&&L(n,{x:(t+i)/2-(r.width||0)/2}),"centerY"===e&&L(n,{y:(a+l)/2-(r.height||0)/2})})},e3=e=>{if(!(V.length<2)){if("spaceBetweenX"===e||"spaceAroundX"===e||"distributeX"===e){let t=[...eU].sort((e,t)=>e.x-t.x),i=Math.min(...t.map(e=>e.x)),a=Math.max(...t.map(e=>e.x+(e.width||0)))-i-t.reduce((e,t)=>e+(t.width||0),0),l=0;if("spaceBetweenX"===e)l=t.length>1?a/(t.length-1):0;else if("spaceAroundX"===e)l=t.length>0?a/t.length:0;else if("distributeX"===e){let e=t[0].x+(t[0].width||0)/2,i=t[t.length-1].x+(t[t.length-1].width||0)/2,a=t.length>1?(i-e)/(t.length-1):0;t.forEach((t,i)=>{L(t.id,{x:e+a*i-(t.width||0)/2})});return}let n=i;"spaceAroundX"===e&&(n+=l/2),t.forEach((t,i)=>{(i>0||"spaceAroundX"===e)&&(n+="spaceBetweenX"===e&&i>0||"spaceAroundX"===e?l:0),L(t.id,{x:n}),n+=t.width||0})}if("spaceBetweenY"===e||"spaceAroundY"===e||"distributeY"===e){let t=[...eU].sort((e,t)=>e.y-t.y),i=Math.min(...t.map(e=>e.y)),a=Math.max(...t.map(e=>e.y+(e.height||0)))-i-t.reduce((e,t)=>e+(t.height||0),0),l=0;if("spaceBetweenY"===e)l=t.length>1?a/(t.length-1):0;else if("spaceAroundY"===e)l=t.length>0?a/t.length:0;else if("distributeY"===e){let e=t[0].y+(t[0].height||0)/2,i=t[t.length-1].y+(t[t.length-1].height||0)/2,a=t.length>1?(i-e)/(t.length-1):0;t.forEach((t,i)=>{L(t.id,{y:e+a*i-(t.height||0)/2})});return}let n=i;"spaceAroundY"===e&&(n+=l/2),t.forEach((t,i)=>{(i>0||"spaceAroundY"===e)&&(n+="spaceBetweenY"===e&&i>0||"spaceAroundY"===e?l:0),L(t.id,{y:n}),n+=t.height||0})}}};return(0,t.jsxs)("div",{className:Z.default.panel,children:[(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:"Canvas"}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Background"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:"transparent"===u?"#ffffff":u,onChange:e=>y(e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>y("transparent"===u?"#ffffff":"transparent"),title:"transparent"===u?"Show Background":"Transparent Background",children:"transparent"===u?(0,t.jsx)(ea,{size:16,color:"#666"}):(0,t.jsx)(ei,{size:16,color:"#fff"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Grid"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:f,onChange:e=>v(e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>j(!b),title:b?"Hide Grid":"Show Grid",children:b?(0,t.jsx)(ei,{size:16,color:"#fff"}):(0,t.jsx)(ea,{size:16,color:"#666"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Guides"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:k,onChange:e=>w(e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>S(!M),title:M?"Hide Rulers":"Show Rulers",children:M?(0,t.jsx)(ei,{size:16,color:"#fff"}):(0,t.jsx)(ea,{size:16,color:"#666"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,children:"Aspect Ratio"}),(0,t.jsxs)("select",{className:Z.default.input,value:J?`${J.w}:${J.h}`:"16:9",onChange:e=>{let[t,i]=e.target.value.split(":").map(Number);eM({w:t,h:i})},children:[(0,t.jsx)("option",{value:"16:9",children:"16:9"}),(0,t.jsx)("option",{value:"4:3",children:"4:3"}),(0,t.jsx)("option",{value:"1:1",children:"1:1"}),(0,t.jsx)("option",{value:"9:16",children:"9:16"}),(0,t.jsx)("option",{value:"3:4",children:"3:4"}),(0,t.jsx)("option",{value:"1.91:1",children:"1.91:1"})]})]}),(0,t.jsx)("div",{className:Z.default.controlGroup,style:{marginTop:12},children:(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,t.jsxs)("label",{onClick:()=>eW(!eA),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Snap to Grid",children:eA?(0,t.jsx)(ev,{size:16,style:{color:"var(--secondary-200)"}}):(0,t.jsx)(p,{size:16})}),(0,t.jsx)("span",{children:"Snap to Grid"})]}),(0,t.jsxs)("label",{onClick:()=>eG(!eR),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Snap to Scale",children:eR?(0,t.jsx)(ev,{size:16,style:{color:"var(--secondary-200)"}}):(0,t.jsx)(p,{size:16})}),(0,t.jsx)("span",{children:"Snap to Scale"})]}),(0,t.jsxs)("label",{onClick:()=>eV(!eL),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Snap to Guides",children:eL?(0,t.jsx)(ev,{size:16,style:{color:"var(--secondary-200)"}}):(0,t.jsx)(p,{size:16})}),(0,t.jsx)("span",{children:"Snap to Guides"})]}),(0,t.jsxs)("label",{onClick:()=>N(!z),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"var(--font-caption)",color:"var(--neutral-11)"},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:z?"Unlock Guides":"Lock Guides",children:z?(0,t.jsx)(g,{size:16,color:"var(--secondary-200)"}):(0,t.jsx)(m,{size:16,color:"var(--neutral-9)"})}),(0,t.jsx)("span",{children:"Lock Guides"})]}),(0,t.jsxs)("label",{onClick:()=>{_.length>0&&C([])},style:{display:"flex",alignItems:"center",gap:8,cursor:_.length>0?"pointer":"default",fontSize:"var(--font-caption)",color:_.length>0?"var(--neutral-11)":"var(--neutral-7)",opacity:_.length>0?1:.5},children:[(0,t.jsx)("div",{className:Z.default.iconBtn,style:{padding:0,border:"none",background:"transparent"},title:"Clear All Guides",children:(0,t.jsx)(Q,{size:16,color:_.length>0?"#ff5555":"var(--neutral-7)"})}),(0,t.jsx)("span",{children:"Delete Guides"})]})]})})]}),(0,t.jsx)("hr",{className:Z.default.divider}),(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsxs)("div",{className:Z.default.workingRow,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:V.length>0?`Selected (${V.length})`:"Properties"}),V.length>0&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:20},children:[(0,t.jsx)("button",{onClick:K,className:Z.default.actionIconBtn,title:"Send to Back",children:(0,t.jsx)(ew,{size:14})}),(0,t.jsx)("button",{onClick:X,className:Z.default.actionIconBtn,title:"Send Backward (Ctrl+Down)",children:(0,t.jsx)(et,{size:14})}),(0,t.jsx)("button",{onClick:Y,className:Z.default.actionIconBtn,title:"Bring Forward (Ctrl+Up)",children:(0,t.jsx)(ee,{size:14})}),(0,t.jsx)("button",{onClick:q,className:Z.default.actionIconBtn,title:"Bring to Front",children:(0,t.jsx)(ek,{size:14})}),(eJ||eQ)&&(0,t.jsx)("div",{style:{width:1,height:16,background:"var(--neutral-4)",margin:"0 4px"}}),eJ&&!eQ&&(0,t.jsx)("button",{onClick:U,className:Z.default.actionIconBtn,title:"Group (G)",children:(0,t.jsx)(eb,{size:14})}),eQ&&(0,t.jsx)("button",{onClick:O,className:Z.default.actionIconBtn,title:"Ungroup (Shift+G)",children:(0,t.jsx)(ej,{size:14})}),(0,t.jsx)("div",{style:{width:1,height:16,background:"var(--neutral-4)",margin:"0 4px"}}),(0,t.jsx)("button",{onClick:F,className:Z.default.actionIconBtn,title:"Duplicate Selected (Ctrl+D)",children:(0,t.jsx)(em,{size:14})}),(0,t.jsx)("button",{onClick:H,className:Z.default.actionIconBtn,title:"Delete Selected",children:(0,t.jsx)(Q,{size:14,color:"#ff5555"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("div",{className:Z.default.label,children:[(0,t.jsx)(ef,{size:16}),"Fill"]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:"transparent"===e1?"#ffffff":e1,onChange:e=>e6("fillColor",e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>e6("fillColor","transparent"===e1?"#000000":"transparent"),title:"transparent"===e1?"Enable Fill":"Disable Fill",children:"transparent"===e1?(0,t.jsx)(ea,{size:16,color:"#666"}):(0,t.jsx)(ei,{size:16,color:"#fff"})})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("div",{className:Z.default.label,children:[(0,t.jsx)(eg,{size:16}),"Stroke"]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{style:{position:"relative",width:24,height:24,borderRadius:4,overflow:"hidden",border:"1px solid #333"},children:(0,t.jsx)("input",{type:"color",value:"transparent"===e0?"#ffffff":e0,onChange:e=>e6("strokeColor",e.target.value),style:{position:"absolute",top:-6,left:-4,width:32,height:34,cursor:"pointer"}})}),(0,t.jsx)("button",{className:Z.default.iconBtn,onClick:()=>e6("strokeColor","transparent"===e0?"#000000":"transparent"),title:"transparent"===e0?"Enable Stroke":"Disable Stroke",children:"transparent"===e0?(0,t.jsx)(ea,{size:16,color:"#666"}):(0,t.jsx)(ei,{size:16,color:"#fff"})})]})]}),(0,t.jsxs)("div",{className:Z.default.controlGroup,style:{opacity:"transparent"===e0?.5:1,pointerEvents:"transparent"===e0?"none":"auto"},children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Width: ",e2,"px"]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"50",value:e2,onChange:e=>e6("strokeWidth",e.target.valueAsNumber||parseInt(e.target.value))})]}),(eZ?.type==="rect"||eZ?.type==="square"||!eZ&&("rect"===eC||"square"===eC))&&(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Corner Radius: ",e5,"px"]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"200",value:e5,onChange:e=>e6("cornerRadius",e.target.valueAsNumber||parseInt(e.target.value))})]}),(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Opacity: ",Math.round(100*e4),"%"]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"1",step:"0.01",value:e4,onChange:e=>e6("opacity",e.target.valueAsNumber||parseFloat(e.target.value))})]}),(eZ?.type==="star"||!eZ&&"star"===eC)&&(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)("span",{style:{fontSize:10,color:"#888"},children:["Spikes: ",eZ?eZ.spikes||5:ez]})}),(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"3",max:"20",step:"1",value:eZ?eZ.spikes||5:ez,onChange:e=>e6("spikes",e.target.valueAsNumber||parseInt(e.target.value))})]}),eZ?.type==="arrow"&&(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.label,style:{fontSize:11},children:"Arrow Head"}),(0,t.jsxs)("select",{className:Z.default.input,style:{width:"60%"},value:eZ.arrowType||eE,onChange:e=>e6("arrowType",e.target.value),children:[(0,t.jsx)("option",{value:"triangle",children:"Triangle"}),(0,t.jsx)("option",{value:"circle",children:"Circle"}),(0,t.jsx)("option",{value:"diamond",children:"Diamond"}),(0,t.jsx)("option",{value:"simple",children:"Simple (Line)"})]})]}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("select",{className:Z.default.input,style:{width:"48%"},value:eZ?.strokeStyle||e$,onChange:e=>e6("strokeStyle",e.target.value),children:[(0,t.jsx)("option",{value:"solid",children:"Solid"}),(0,t.jsx)("option",{value:"dashed",children:"Dashed"}),(0,t.jsx)("option",{value:"dotted",children:"Dotted"}),(0,t.jsx)("option",{value:"loose",children:"Loose"})]}),(0,t.jsxs)("select",{className:Z.default.input,style:{width:"48%"},value:eZ?.lineCap||eB,onChange:e=>e6("lineCap",e.target.value),children:[(0,t.jsx)("option",{value:"round",children:"Round Cap"}),(0,t.jsx)("option",{value:"butt",children:"Flat Cap"}),(0,t.jsx)("option",{value:"square",children:"Square Cap"})]})]}),eJ&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("span",{style:{fontSize:10,color:"#888",display:"block",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Align"}),(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Horizontal"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>e8("left"),className:Z.default.iconBtn,title:"Align Left",style:{flex:1,padding:"6px"},children:(0,t.jsx)(el,{size:16})}),(0,t.jsx)("button",{onClick:()=>e8("centerX"),className:Z.default.iconBtn,title:"Align Center",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ed,{size:16})}),(0,t.jsx)("button",{onClick:()=>e8("right"),className:Z.default.iconBtn,title:"Align Right",style:{flex:1,padding:"6px"},children:(0,t.jsx)(en,{size:16})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Vertical"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>e8("top"),className:Z.default.iconBtn,title:"Align Top",style:{flex:1,padding:"6px"},children:(0,t.jsx)(er,{size:16})}),(0,t.jsx)("button",{onClick:()=>e8("centerY"),className:Z.default.iconBtn,title:"Align Center",style:{flex:1,padding:"6px"},children:(0,t.jsx)(eo,{size:16})}),(0,t.jsx)("button",{onClick:()=>e8("bottom"),className:Z.default.iconBtn,title:"Align Bottom",style:{flex:1,padding:"6px"},children:(0,t.jsx)(es,{size:16})})]})]})]}),(0,t.jsxs)("div",{className:Z.default.controlGroup,children:[(0,t.jsx)("span",{style:{fontSize:10,color:"#888",display:"block",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Distribute"}),(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Horizontal"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>e3("spaceBetweenX"),className:Z.default.iconBtn,title:"Space Between",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ex,{size:16})}),(0,t.jsx)("button",{onClick:()=>e3("spaceAroundX"),className:Z.default.iconBtn,title:"Space Around",style:{flex:1,padding:"6px"},children:(0,t.jsx)(eu,{size:16})}),(0,t.jsx)("button",{onClick:()=>e3("distributeX"),className:Z.default.iconBtn,title:"Distribute Evenly",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ey,{size:16})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"Vertical"}),(0,t.jsxs)("div",{style:{display:"flex",gap:2,background:"rgba(255, 255, 255, 0.03)",padding:2,borderRadius:4},children:[(0,t.jsx)("button",{onClick:()=>e3("spaceBetweenY"),className:Z.default.iconBtn,title:"Space Between",style:{flex:1,padding:"6px"},children:(0,t.jsx)(eh,{size:16})}),(0,t.jsx)("button",{onClick:()=>e3("spaceAroundY"),className:Z.default.iconBtn,title:"Space Around",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ec,{size:16})}),(0,t.jsx)("button",{onClick:()=>e3("distributeY"),className:Z.default.iconBtn,title:"Distribute Evenly",style:{flex:1,padding:"6px"},children:(0,t.jsx)(ep,{size:16})})]})]})]})]}),(eZ?.type==="text"||!eZ&&"text"===eC)&&(0,t.jsx)(eI,{})]}),(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:"Layers"}),(0,t.jsx)("button",{onClick:P,className:Z.default.iconBtn,style:{border:"1px solid #555"},children:"+ Add"})]}),(0,t.jsx)("div",{className:Z.default.layerList,children:$.map((e,i)=>(0,t.jsxs)("div",{className:`${Z.default.layerItem} ${W===e.id?Z.default.layerActive:""}`,onClick:()=>R(e.id),children:[(0,t.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,width:"100%"},children:[(0,t.jsx)("span",{style:{fontSize:13},children:e.name}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,t.jsx)("input",{className:Z.default.slider,type:"range",min:"0",max:"1",step:"0.1",value:void 0!==e.opacity?e.opacity:1,onClick:e=>e.stopPropagation(),onChange:t=>A(e.id,{opacity:parseFloat(t.target.value)}),style:{width:70,marginTop:4}})})]}),(0,t.jsxs)("div",{className:Z.default.layerControls,children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id,{locked:!e.locked})},className:Z.default.layerBtn,title:e.locked?"Unlock Layer":"Lock Layer",children:e.locked?(0,t.jsx)(g,{size:13,color:"var(--secondary-200)"}):(0,t.jsx)(m,{size:13})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id,{visible:!e.visible})},className:Z.default.layerBtn,children:e.visible?(0,t.jsx)(ei,{size:13}):(0,t.jsx)(ea,{size:13})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),D(e.id)},className:Z.default.layerBtn,title:"Duplicate Layer",children:(0,t.jsx)(em,{size:13})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id)},className:Z.default.layerBtn,children:(0,t.jsx)(Q,{size:13,color:"var(--primary-350)"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),E(i,"up")},className:Z.default.layerBtn,children:(0,t.jsx)(ee,{size:13})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),E(i,"down")},className:Z.default.layerBtn,children:(0,t.jsx)(et,{size:13})})]})]},e.id))})]}),(0,t.jsx)("hr",{className:Z.default.divider}),(0,t.jsxs)("div",{className:Z.default.section,children:[(0,t.jsx)("div",{className:Z.default.sectionLabel,children:"Export"}),(0,t.jsxs)("div",{className:Z.default.row,children:[(0,t.jsxs)("select",{value:eq,onChange:e=>eK(e.target.value),className:Z.default.input,style:{width:"48%"},children:[(0,t.jsx)("option",{value:"png",children:"PNG"}),(0,t.jsx)("option",{value:"jpeg",children:"JPG"}),(0,t.jsx)("option",{value:"webp",children:"WEBP"}),(0,t.jsx)("option",{value:"svg",children:"SVG"})]}),"svg"!==eq&&(0,t.jsxs)("select",{value:eY,onChange:e=>eX(Number(e.target.value)),className:Z.default.input,style:{width:"48%"},children:[(0,t.jsx)("option",{value:1,children:"1x"}),(0,t.jsx)("option",{value:2,children:"2x"}),(0,t.jsx)("option",{value:3,children:"3x"}),(0,t.jsx)("option",{value:4,children:"4x"})]})]}),(0,t.jsxs)("button",{onClick:()=>{let e=eS/J.w*J.h;if("svg"===eq){let t=`<svg xmlns="http://www.w3.org/2000/svg" width="${eS}" height="${e}" viewBox="0 0 ${eS} ${e}">`;"transparent"!==u&&(t+=`<rect width="${eS}" height="${e}" fill="${u}"/>`),[...$].reverse().forEach(e=>{if(!e.visible)return;let i=void 0!==e.opacity?e.opacity:1;G.filter(t=>t.layerId===e.id).forEach(e=>{let a=(void 0!==e.opacity?e.opacity:1)*i;t+=((e,t)=>{let{type:i,x:a,y:l,width:n,height:r,strokeColor:s,fillColor:o,strokeWidth:d,rotation:h,strokeStyle:c,lineCap:x,arrowType:u,spikes:p,points:y,isNormalized:f,cornerRadius:g}=e,m="",v=h?` transform="rotate(${h} ${a+n/2} ${l+r/2})"`:"",k="dashed"===c?'stroke-dasharray="15,10"':"dotted"===c?'stroke-dasharray="2,5"':"loose"===c?'stroke-dasharray="25,15"':"",w=x||"round",b="transparent"===o?"none":o,j="transparent"===s?"none":s;switch(i){case"rect":case"square":let M=g?Math.min(g,Math.abs(n)/2):0,S=g?Math.min(g,Math.abs(r)/2):0;m=`<rect x="${a}" y="${l}" width="${n}" height="${r}" rx="${M}" ry="${S}" fill="${b}" stroke="${j}" stroke-width="${d}" opacity="${t}"${v} ${k} stroke-linecap="${w}"/>`;break;case"circle":let _=Math.abs(n)/2,C=Math.abs(r)/2;m=`<ellipse cx="${a+n/2}" cy="${l+r/2}" rx="${_}" ry="${C}" fill="${b}" stroke="${j}" stroke-width="${d}" opacity="${t}"${v} ${k} stroke-linecap="${w}"/>`;break;case"triangle":m=`<polygon points="${a+n/2},${l} ${a},${l+r} ${a+n},${l+r}" fill="${b}" stroke="${j}" stroke-width="${d}" opacity="${t}"${v} ${k} stroke-linecap="${w}"/>`;break;case"line":case"arrow":m=`<line x1="${a}" y1="${l}" x2="${a+n}" y2="${l+r}" stroke="${j}" stroke-width="${d}" opacity="${t}"${v} ${k} stroke-linecap="${w}"/>`;break;case"star":let z=a+n/2,N=l+r/2,$=Math.min(Math.abs(n),Math.abs(r))/2,I=$/2,P=[],B=p||5;for(let e=0;e<2*B;e++){let t=Math.PI/2*3+Math.PI/B*e,i=e%2==0?$:I;P.push(`${z+Math.cos(t)*i},${N+Math.sin(t)*i}`)}m=`<polygon points="${P.join(" ")}" fill="${b}" stroke="${j}" stroke-width="${d}" opacity="${t}"${v} ${k} stroke-linecap="${w}"/>`;break;case"pencil":if(y&&y.length>0){let e=y.map((e,t)=>{let i=f?{x:a+e.x*n,y:l+e.y*r}:e;return`${0===t?"M":"L"} ${i.x} ${i.y}`}).join(" ");m=`<path d="${e}" fill="none" stroke="${j}" stroke-width="${d}" opacity="${t}"${v} ${k} stroke-linecap="${w}"/>`}break;case"text":if(e.textContent&&!1!==e.textVisible){let i=e.textContent.split("\n"),r=e.fontSize||24,s=(e.lineHeight||1.2)*r,o=e.fontFamily||"Google Sans",d=e.fontWeight||"400",h=e.fontStyle||"normal",c=e.textColor||"#000000",x=e.textAlign||"left",u=e.letterSpacing||0,p=a;"center"===x?p=a+n/2:"right"===x&&(p=a+n);let y="";i.forEach((i,a)=>{y+=`<text x="${p}" y="${l+r+a*s}" font-family="${o}" font-size="${r}" font-weight="${d}" font-style="${h}" fill="${c}" text-anchor="${"center"===x?"middle":"right"===x?"end":"start"}" letter-spacing="${u}" opacity="${t}"${v}>`,e.textDecoration&&"none"!==e.textDecoration?e.textDecoration.includes("underline")?y+=`<tspan text-decoration="underline">${i}</tspan>`:e.textDecoration.includes("line-through")?y+=`<tspan text-decoration="line-through">${i}</tspan>`:y+=i:y+=i,y+="</text>"}),m=y}}return m})(e,a)})});let i=new Blob([t+="</svg>"],{type:"image/svg+xml"}),a=URL.createObjectURL(i),l=document.createElement("a");l.download="drawing.svg",l.href=a,l.click(),URL.revokeObjectURL(a)}else{let t=document.createElement("canvas");t.width=eS*eY,t.height=e*eY;let i=t.getContext("2d");"transparent"!==u&&(i.fillStyle=u,i.fillRect(0,0,t.width,t.height));let a=document.createElement("canvas");a.width=t.width,a.height=t.height;let l=a.getContext("2d");l.scale(eY,eY),[...$].reverse().forEach(e=>{e.visible&&G.filter(t=>t.layerId===e.id).forEach(t=>B(l,t,void 0!==e.opacity?e.opacity:1))}),i.drawImage(a,0,0);let n=document.createElement("a");n.download=`drawing-x${eY}.${eq}`,n.href=t.toDataURL(`image/${eq}`),n.click()}},className:Z.default.exportBtn,children:[(0,t.jsx)(et,{strokeWidth:2.5,size:16}),"Download ","svg"===eq?"SVG":"Image"]})]})]})}let eB=c("monitor-off",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var eT=e.i(20897);let eE=()=>(0,t.jsxs)("div",{className:eT.default.responsiveWarning,children:[(0,t.jsx)("div",{className:eT.default.warningIcon,children:(0,t.jsx)(eB,{size:64,strokeWidth:1.5})}),(0,t.jsx)("h1",{className:eT.default.warningTitle,children:"Device Not Supported"}),(0,t.jsxs)("p",{className:eT.default.warningText,children:["This editor requires a larger screen for the best experience. Please visit on a device with a width of 1280px or more, or try the ",(0,t.jsx)("strong",{children:"Desktop View"})," on your mobile browser."]})]});function eD(){return(0,t.jsxs)(n,{children:[(0,t.jsx)(eE,{}),(0,t.jsxs)("main",{className:eT.default.main,children:[(0,t.jsx)(I,{}),(0,t.jsx)(V,{}),(0,t.jsx)(eP,{})]})]})}e.s(["default",()=>eD],74647)}]);